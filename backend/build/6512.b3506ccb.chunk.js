(self.webpackChunkgettem=self.webpackChunkgettem||[]).push([[6512],{92268:k=>{function Q(n,t,f,h){for(var P=-1,D=n==null?0:n.length;++P<D;){var R=n[P];t(h,R,f(R),n)}return h}k.exports=Q},32712:(k,Q,n)=>{var t=n(66256),f=t("length");k.exports=f},20456:(k,Q,n)=>{var t=n(80232);function f(h,P,D,R){return t(h,function(b,j,W){P(R,b,D(b),W)}),R}k.exports=f},80232:(k,Q,n)=>{var t=n(48208),f=n(62632),h=f(t);k.exports=h},50572:(k,Q,n)=>{var t=n(23236),f=n(58720),h="[object RegExp]";function P(D){return f(D)&&t(D)==h}k.exports=P},22488:(k,Q,n)=>{var t=n(80232),f=n(16005);function h(P,D){var R=-1,b=f(P)?Array(P.length):[];return t(P,function(j,W,J){b[++R]=D(j,W,J)}),b}k.exports=h},24576:(k,Q,n)=>{var t=n(12480),f=n(64316),h=n(24020),P=n(22488),D=n(92048),R=n(85968),b=n(71456),j=n(45504),W=n(75516);function J(q,ne,Ie){ne.length?ne=t(ne,function(ee){return W(ee)?function(ae){return f(ae,ee.length===1?ee[0]:ee)}:ee}):ne=[j];var re=-1;ne=t(ne,R(h));var oe=P(q,function(ee,ae,te){var Ae=t(ne,function(Ne){return Ne(ee)});return{criteria:Ae,index:++re,value:ee}});return D(oe,function(ee,ae){return b(ee,ae,Ie)})}k.exports=J},92048:k=>{function Q(n,t){var f=n.length;for(n.sort(t);f--;)n[f]=n[f].value;return n}k.exports=Q},13052:(k,Q,n)=>{var t=n(36792);function f(h,P){if(h!==P){var D=h!==void 0,R=h===null,b=h===h,j=t(h),W=P!==void 0,J=P===null,q=P===P,ne=t(P);if(!J&&!ne&&!j&&h>P||j&&W&&q&&!J&&!ne||R&&W&&q||!D&&q||!b)return 1;if(!R&&!j&&!ne&&h<P||ne&&D&&b&&!R&&!j||J&&D&&b||!W&&b||!q)return-1}return 0}k.exports=f},71456:(k,Q,n)=>{var t=n(13052);function f(h,P,D){for(var R=-1,b=h.criteria,j=P.criteria,W=b.length,J=D.length;++R<W;){var q=t(b[R],j[R]);if(q){if(R>=J)return q;var ne=D[R];return q*(ne=="desc"?-1:1)}}return h.index-P.index}k.exports=f},4068:(k,Q,n)=>{var t=n(92268),f=n(20456),h=n(24020),P=n(75516);function D(R,b){return function(j,W){var J=P(j)?t:f,q=b?b():{};return J(j,R,h(W,2),q)}}k.exports=D},62632:(k,Q,n)=>{var t=n(16005);function f(h,P){return function(D,R){if(D==null)return D;if(!t(D))return h(D,R);for(var b=D.length,j=P?b:-1,W=Object(D);(P?j--:++j<b)&&R(W[j],j,W)!==!1;);return D}}k.exports=f},16792:(k,Q,n)=>{var t=n(32712),f=n(26872),h=n(83152);function P(D){return f(D)?h(D):t(D)}k.exports=P},83152:k=>{var Q="\\ud800-\\udfff",n="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",f="\\u20d0-\\u20ff",h=n+t+f,P="\\ufe0e\\ufe0f",D="["+Q+"]",R="["+h+"]",b="\\ud83c[\\udffb-\\udfff]",j="(?:"+R+"|"+b+")",W="[^"+Q+"]",J="(?:\\ud83c[\\udde6-\\uddff]){2}",q="[\\ud800-\\udbff][\\udc00-\\udfff]",ne="\\u200d",Ie=j+"?",re="["+P+"]?",oe="(?:"+ne+"(?:"+[W,J,q].join("|")+")"+re+Ie+")*",ee=re+Ie+oe,ae="(?:"+[W+R+"?",R,J,q,D].join("|")+")",te=RegExp(b+"(?="+b+")|"+ae+ee,"g");function Ae(Ne){for(var me=te.lastIndex=0;te.test(Ne);)++me;return me}k.exports=Ae},30680:(k,Q,n)=>{var t=n(92188),f=n(4068),h=Object.prototype,P=h.hasOwnProperty,D=f(function(R,b,j){P.call(R,j)?R[j].push(b):t(R,j,[b])});k.exports=D},22832:(k,Q,n)=>{var t=n(50572),f=n(85968),h=n(53980),P=h&&h.isRegExp,D=P?f(P):t;k.exports=D},66685:(k,Q,n)=>{var t=n(23236),f=n(75516),h=n(58720),P="[object String]";function D(R){return typeof R=="string"||!f(R)&&h(R)&&t(R)==P}k.exports=D},37132:(k,Q,n)=>{var t=n(16411),f=n(29564),h=n(16005),P=n(66685),D=n(16792),R="[object Map]",b="[object Set]";function j(W){if(W==null)return 0;if(h(W))return P(W)?D(W):W.length;var J=f(W);return J==R||J==b?W.size:t(W).length}k.exports=j},87144:(k,Q,n)=>{var t=n(78456),f=n(24576),h=n(41912),P=n(53492),D=h(function(R,b){if(R==null)return[];var j=b.length;return j>1&&P(R,b[0],b[1])?b=[]:j>2&&P(b[0],b[1],b[2])&&(b=[b[0]]),f(R,t(b,1),[])});k.exports=D},81112:(k,Q,n)=>{var t=n(43280);function f(h){return t(h).toLowerCase()}k.exports=f},64772:(k,Q,n)=>{var t=n(14184),f=n(74324),h=n(26872),P=n(38955),D=n(22832),R=n(16792),b=n(33796),j=n(57628),W=n(43280),J=30,q="...",ne=/\w*$/;function Ie(re,oe){var ee=J,ae=q;if(P(oe)){var te="separator"in oe?oe.separator:te;ee="length"in oe?j(oe.length):ee,ae="omission"in oe?t(oe.omission):ae}re=W(re);var Ae=re.length;if(h(re)){var Ne=b(re);Ae=Ne.length}if(ee>=Ae)return re;var me=ee-R(ae);if(me<1)return ae;var ve=Ne?f(Ne,0,me).join(""):re.slice(0,me);if(te===void 0)return ve+ae;if(Ne&&(me+=ve.length-me),D(te)){if(re.slice(me).search(te)){var nt,_=ve;for(te.global||(te=RegExp(te.source,W(ne.exec(te))+"g")),te.lastIndex=0;nt=te.exec(_);)var Je=nt.index;ve=ve.slice(0,Je===void 0?me:Je)}}else if(re.indexOf(t(te),me)!=me){var at=ve.lastIndexOf(te);at>-1&&(ve=ve.slice(0,at))}return ve+ae}k.exports=Ie},42552:(k,Q,n)=>{var t=n(89664);function f(h){return h&&h.length?t(h):[]}k.exports=f},32912:(k,Q,n)=>{"use strict";n.d(Q,{U:()=>P});var t=n(19968),f=n(3704),h=n(5928);const P=({options:R,...b})=>(0,t.jsx)(h.e,{...b,children:R.map(j=>"children"in j?(0,t.jsx)(h.OK,{label:j.label,values:j.children.map(W=>W.value.toString()),children:j.children.map(W=>(0,t.jsx)(D,{value:W.value,children:W.label},W.value))},j.label):(0,t.jsx)(h.eI,{value:j.value,children:j.label},j.value))}),D=(0,f.default)(h.eI)`
  padding-left: ${({theme:R})=>R.spaces[7]};
`},46512:(k,Q,n)=>{"use strict";n.r(Q),n.d(Q,{A:()=>we,C:()=>ft,a:()=>Ge,g:()=>c,i:()=>nr,u:()=>De});var t=n(19968),f=n(62552),h=n(5e3),P=n(82800),D=n(55716),R=n(32912),b=n(48936),j=n(63358),W=n(83360),J=n(28724),q=n(70996),ne=n(81504),Ie=n(25824),re=n(6496),oe=n(53804),ee=n(6912),ae=n(80700),te=n(35933),Ae=n(13384),Ne=n(53744),me=n(32568),ve=n(62492),nt=n(65104),_=n(35676),Je=n(2931),at=n(95080),Rn=n(33128),Pn=n(35480),Un=n(79672),Bn=n(86400),$t=n(23264),kn=n(70544),Wn=n(65092),zn=n(9544),Zn=n(25352),Vn=n(11208),Gn=n(3548),Qn=n(20596),N=n(59232),Hn=n(21424),H=n(14632),Dt=n(39380),Te=n(49008),Yn=n(53504),Xn=n(32016),Jn=n(87320),Kn=n(3240),wn=n(14520),Me=n(3704),qn=n(37856);const _n=(0,Me.default)(h.k)`
  svg {
    height: ${4/16}rem;
    path {
      fill: ${({theme:e})=>e.colors.neutral700};
    }
  }
`,ea=Me.default.button`
  border: none;
  padding: 0;
  background: transparent;
  display: flex;
  align-items: center;
`,ta=Me.default.div`
  display: flex;
  align-items: center;
  width: ${12/16}rem;
  transform: rotateX(${({rotated:e})=>e?"0deg":"180deg"});
`,na=({label:e,children:a,id:s})=>{const[i,o]=(0,f.useState)(!0),l=(0,qn.I)(s),r=()=>{o(d=>!d)};return(0,t.jsxs)(h.k,{children:[(0,t.jsx)(_n,{paddingLeft:7,paddingTop:2,paddingBottom:2,paddingRight:4,children:(0,t.jsx)(b.C,{justifyContent:"space-between",children:(0,t.jsxs)(ea,{onClick:r,"aria-expanded":i,"aria-controls":l,children:[(0,t.jsx)(ta,{rotated:i,children:(0,t.jsx)(wn.c,{"aria-hidden":!0})}),(0,t.jsx)(h.k,{paddingLeft:2,children:(0,t.jsx)(j.O,{as:"span",fontWeight:"semiBold",textColor:"neutral800",children:e})})]})})}),i&&(0,t.jsx)("ul",{id:l,children:f.Children.map(a,(d,g)=>(0,t.jsx)("li",{children:d},g))})]})};var Rt=n(89976),Pt=n(5540),aa=n(5848),sa=n(39820),st=n(58756),oa=n(58692),ia=n(37100),ra=n(27592),la=n(73376),Ut=n(37776),ca=n(67576),da=n(42760),ua=n(1984),ma=n(11464),pa=n(47564),ga=n(19960),fa=n(75384),ha=n(61924),ya=n(84084),va=n(17032),ba=n(60780),xa=n(69648),Ca=n(44792),Ta=n(86304),Ma=n(43272),ja=n(53305),Sa=n(77080),Aa=n(62584),Na=n(14456),Fa=n(46596),Oa=n(95960),La=n(21508),Ea=n(25024),Ia=n(92116),$a=n(39560),Da=n(71640),Ra=n(54008),Pa=n(27548),Ua=n(80328),Ba=n(33016),ka=n(41272),Wa=n(45236),za=n(36944),Za=n(99995),Va=n(81011),Ga=n(92508),Qa=n(59584),Ha=n(84760),Ya=n(14032),Xa=n(50692),Ja=n(62736),Ka=n(15800),wa=n(50452),qa=n(60012),_a=n(35828),es=n(60900),ts=n(28656),ns=n(37896),as=n(51768),ss=n(93048),os=n(97717),is=n(83456),rs=n(24504),ls=n(48256),cs=n(42508),ds=n(50616),us=n(30932),ms=n(872),ps=n(98168),gs=n(41724),fs=n(96476),hs=n(66156),ys=n(73560),vs=n(79136),Bt=n(89032),kt=n(53120),Wt=n(70388),bs=n(80008),xs=n(76080),Cs=n(67864),Ts=n(21024),Ms=n(6884),js=n(88796),zt=n(5556),Zt=n(63472),Vt=n(96508),Ss=n(76872),As=n(4928),Ns=n(90152),Fs=n(89940),Os=n(35492),Ls=n(77347),Es=n(85136),Is=n(68732),$s=n(76204),Ds=n(64764),Ue=n(48636),Rs=n(68840),Ps=n(53312),Us=n(89304),Bs=n(92420),ks=n(12324),Ws=n(30076),zs=n(35520),Zs=n(56280),Vs=n(43776),Gt=n(85088),Gs=n(63024),Qs=n(37272),Hs=n(37576),Ys=n(71844),Xs=n(10724),Js=n(7092),Ks=n(52928),ws=n(59512),qs=n(24392),_s=n(42296),eo=n(80196),to=n(63180),no=n(46672),ao=n(2064),so=n(6472),oo=n(44504),io=n(59964),ro=n(80208),lo=n(76120),co=n(83820),uo=n(4176),mo=n(3608),po=n(36632),go=n(13872),Ke=n(44088),fo=n(57688),ho=n(57252),Qt=n(32612),yo=n(50064),ot=n(47912),vo=n(13520),bo=n(86108),Ht=n(42260),dt=n(35704),Yt=n(51855),xo=n(58956),Co=n(46849),To=n(23824),Mo=n(67568),Xt=n(22557),jo=n(7632),So=n(64136),Ao=n(79848),No=n(71324),$e=n(30840),x=n(9328),ut=n(13192),$=n(85676),Fo=n(30680),Jt=n(35184),Oo=n(37132),Ve=n(70516),Lo=n(56781),Kt=n(81112),Eo=n(12132),it=n(61397),wt=n(64772),Io=n(42552),T=n(52540),$o=n(83180),mt=n(61152),qt=n(77784),_t=n(67432),Do=n(18424),en=n(21968),Ro=n(87144);const c=e=>`${x.p}.${e}`,tn=(0,f.createContext)(),De=()=>(0,f.useContext)(tn),nn=f.createContext(),Ge=()=>(0,f.useContext)(nn),Po=()=>{const{components:e,componentsGroupedByCategory:a,contentTypes:s,isInDevelopmentMode:i,sortedContentTypesList:o,modifiedData:l,initialData:r}=De(),d=(0,N.eo)(),{trackUsage:g}=(0,N.m4)(),[m,p]=(0,f.useState)(""),{onOpenModalCreateSchema:u,onOpenModalEditCategory:I}=Ge(),{locale:A}=(0,H.c)(),{startsWith:C}=(0,N.WO)(A,{sensitivity:"base"}),S=(0,N.In)(A,{sensitivity:"base"}),z=!Object.keys(s).some(Z=>s[Z].isTemporary===!0)&&!Object.keys(e).some(Z=>e[Z].isTemporary===!0)&&ut(l,r),M=()=>{z?(g("willCreateContentType"),u({modalType:"contentType",kind:"collectionType",actionType:"create",forTarget:"contentType"})):B()},L=()=>{z?(g("willCreateSingleType"),u({modalType:"contentType",kind:"singleType",actionType:"create",forTarget:"contentType"})):B()},U=()=>{z?(g("willCreateComponent"),u({modalType:"component",kind:null,actionType:"create",forTarget:"component"})):B()},B=()=>{d({type:"info",message:{id:c("notification.info.creating.notSaved"),defaultMessage:"Please save your work before creating a new collection type or component"}})},K=Object.entries(a).map(([Z,ye])=>({name:Z,title:Z,isEditable:i,onClickEdit(w,xe){w.stopPropagation(),z?I(xe.name):B()},links:ye.map(w=>({name:w.uid,to:`/plugins/${x.p}/component-categories/${Z}/${w.uid}`,title:w.schema.displayName})).sort((w,xe)=>S.compare(w.title,xe.title))})).sort((Z,ye)=>S.compare(Z.title,ye.title)),de=o.filter(Z=>Z.visible);return{menu:[{name:"models",title:{id:`${c("menu.section.models.name")}`,defaultMessage:"Collection Types"},customLink:i&&{id:`${c("button.model.create")}`,defaultMessage:"Create new collection type",onClick:M},links:de.filter(Z=>Z.kind==="collectionType")},{name:"singleTypes",title:{id:`${c("menu.section.single-types.name")}`,defaultMessage:"Single Types"},customLink:i&&{id:`${c("button.single-types.create")}`,defaultMessage:"Create new single type",onClick:L},links:de.filter(Z=>Z.kind==="singleType")},{name:"components",title:{id:`${c("menu.section.components.name")}`,defaultMessage:"Components"},customLink:i&&{id:`${c("button.component.create")}`,defaultMessage:"Create a new component",onClick:U},links:K}].map(Z=>Z.links.some(w=>Array.isArray(w.links))?{...Z,links:Z.links.map(w=>{const xe=w.links.filter(pe=>C(pe.title,m));return xe.length===0?null:{...w,links:xe.sort((pe,se)=>S.compare(pe.title,se.title))}}).filter(Boolean)}:{...Z,links:Z.links.filter(w=>C(w.title,m)).sort((w,xe)=>S.compare(w.title,xe.title))}),searchValue:m,onSearchChange:p}},Uo=()=>{const{menu:e,searchValue:a,onSearchChange:s}=Po(),{formatMessage:i}=(0,H.c)();return(0,t.jsxs)(Yn.y,{ariaLabel:i({id:`${c("plugin.name")}`,defaultMessage:"Content-Types Builder"}),children:[(0,t.jsx)(Xn.C,{searchable:!0,value:a,onClear:()=>s(""),onChange:o=>s(o.target.value),label:i({id:`${c("plugin.name")}`,defaultMessage:"Content-Types Builder"}),searchLabel:i({id:"global.search",defaultMessage:"Search"})}),(0,t.jsx)(Jn.I,{children:e.map(o=>(0,t.jsxs)(f.Fragment,{children:[(0,t.jsx)(Kn.A,{label:i({id:o.title.id,defaultMessage:o.title.defaultMessage}),collapsable:!0,badgeLabel:o.links.length.toString(),children:o.links.map(l=>l.links?(0,t.jsx)(na,{label:$e(l.title),children:l.links.map(r=>(0,t.jsx)(Rt.w,{as:Dt.Af,to:r.to,active:r.active,isSubSectionChild:!0,children:$e(i({id:r.name,defaultMessage:r.title}))},r.name))},l.name):(0,t.jsx)(Rt.w,{as:Dt.Af,to:l.to,active:l.active,children:$e(i({id:l.name,defaultMessage:l.title}))},l.name))}),o.customLink&&(0,t.jsx)(h.k,{paddingLeft:7,children:(0,t.jsx)(P.c,{onClick:o.customLink.onClick,startIcon:(0,t.jsx)(D.G,{as:Ue.c,width:(0,N.W8)(8),height:(0,N.W8)(8)}),marginTop:2,children:i({id:o.customLink.id,defaultMessage:o.customLink.defaultMessage})})})]},o.name))})]})},an=e=>e.kind==="collectionType"&&(e.restrictRelationsTo===null||Array.isArray(e.restrictRelationsTo)&&e.restrictRelationsTo.length>0),pt=(e,a)=>e.find(({name:s})=>s===a),Bo=[{label:"All",children:[{label:"images (JPEG, PNG, GIF, SVG, TIFF, ICO, DVU)",value:"images"},{label:"videos (MPEG, MP4, Quicktime, WMV, AVI, FLV)",value:"videos"},{label:"audios (MP3, WAV, OGG)",value:"audios"},{label:"files (CSV, ZIP, PDF, Excel, JSON, ...)",value:"files"}]}],ko=({intlLabel:e,name:a,onChange:s,value:i=null})=>{const{formatMessage:o}=(0,H.c)(),l=i===null||i?.length===0?o({id:"global.none",defaultMessage:"None"}):[...i].sort().map(d=>$e(d)).join(", "),r=e.id?o({id:e.id,defaultMessage:e.defaultMessage}):a;return(0,t.jsx)(R.U,{id:"select1",label:r,customizeContent:()=>l,onChange:d=>{d.length>0?s({target:{name:a,value:d,type:"allowed-types-select"}}):s({target:{name:a,value:null,type:"allowed-types-select"}})},options:Bo,value:i||[]})},sn={biginteger:Ke.c,blocks:fo.c,boolean:ho.c,collectionType:Qt.c,component:yo.c,contentType:Qt.c,date:ot.c,datetime:ot.c,decimal:Ke.c,dynamiczone:vo.c,email:bo.c,enum:Ht.c,enumeration:Ht.c,file:dt.c,files:dt.c,float:Ke.c,integer:Ke.c,json:Yt.c,JSON:Yt.c,media:dt.c,number:Ke.c,password:xo.c,relation:Co.c,richtext:To.c,singleType:Mo.c,string:Xt.c,text:Xt.c,time:ot.c,timestamp:ot.c,uid:jo.c},Wo=(0,Me.default)(h.k)`
  svg {
    height: 100%;
    width: 100%;
  }
`,we=({type:e,customField:a=null,...s})=>{const i=(0,N.QV)();let o=sn[e];if(a){const r=i.get(a)?.icon;r&&(o=r)}return sn[e]?(0,t.jsx)(Wo,{height:(0,N.W8)(24),width:(0,N.W8)(32),shrink:0,...s,"aria-hidden":!0,children:(0,t.jsx)(h.k,{as:o})}):null},on=(0,Me.default)(h.k)`
  width: 100%;
  height: 100%;
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  text-align: left;
  &:hover {
    background: ${({theme:e})=>e.colors.primary100};
    border: 1px solid ${({theme:e})=>e.colors.primary200};
  }
`,zo=[],Zo=()=>(0,t.jsx)(b.C,{grow:1,justifyContent:"flex-end",children:(0,t.jsxs)(b.C,{gap:1,hasRadius:!0,background:"alternative100",padding:`${2/16}rem ${4/16}rem`,children:[(0,t.jsx)(D.G,{width:`${10/16}rem`,height:`${10/16}rem`,as:So.c,color:"alternative600"}),(0,t.jsx)(j.O,{textColor:"alternative600",variant:"sigma",children:"New"})]})}),Vo=({type:e="text"})=>{const{formatMessage:a}=(0,H.c)(),{onClickSelectField:s}=Ge(),i=()=>{s({attributeType:e,step:e==="component"?"1":null})};return(0,t.jsx)(on,{padding:4,as:"button",hasRadius:!0,type:"button",onClick:i,children:(0,t.jsxs)(b.C,{children:[(0,t.jsx)(we,{type:e}),(0,t.jsxs)(h.k,{paddingLeft:4,width:"100%",children:[(0,t.jsxs)(b.C,{justifyContent:"space-between",children:[(0,t.jsx)(j.O,{fontWeight:"bold",children:a({id:c(`attribute.${e}`),defaultMessage:e})}),zo.includes(e)&&(0,t.jsx)(Zo,{})]}),(0,t.jsx)(b.C,{children:(0,t.jsx)(j.O,{variant:"pi",textColor:"neutral600",children:a({id:c(`attribute.${e}.description`),defaultMessage:"A type for modeling data"})})})]})]})})},Go=({attributes:e})=>(0,t.jsx)(W.a,{tagName:"button",children:(0,t.jsx)(b.C,{direction:"column",alignItems:"stretch",gap:8,children:e.map((a,s)=>(0,t.jsx)(J.y,{gap:3,children:a.map(i=>(0,t.jsx)(q.C,{col:6,children:(0,t.jsx)(Vo,{type:i})},i))},s))})}),Qo=({customFieldUid:e,customField:a})=>{const{type:s,intlLabel:i,intlDescription:o}=a,{formatMessage:l}=(0,H.c)(),{onClickSelectCustomField:r}=Ge(),d=()=>{r({attributeType:s,customFieldUid:e})};return(0,t.jsx)(on,{padding:4,as:"button",hasRadius:!0,type:"button",onClick:d,children:(0,t.jsxs)(b.C,{children:[(0,t.jsx)(we,{type:s,customField:e}),(0,t.jsxs)(h.k,{paddingLeft:4,children:[(0,t.jsx)(b.C,{children:(0,t.jsx)(j.O,{fontWeight:"bold",children:l(i)})}),(0,t.jsx)(b.C,{children:(0,t.jsx)(j.O,{variant:"pi",textColor:"neutral600",children:l(o)})})]})]})})},Ho=(0,Me.default)(h.k)`
  background: ${({theme:e})=>`linear-gradient(180deg, rgba(234, 234, 239, 0) 0%, ${e.colors.neutral150} 100%)`};
  opacity: 0.33;
`,Yo=()=>(0,t.jsx)(b.C,{wrap:"wrap",gap:4,children:[...Array(4)].map((e,a)=>(0,t.jsx)(Ho,{height:"138px",width:"375px",hasRadius:!0},`empty-card-${a}`))}),Xo=()=>{const{formatMessage:e}=(0,H.c)();return(0,t.jsxs)(h.k,{position:"relative",children:[(0,t.jsx)(Yo,{}),(0,t.jsx)(h.k,{position:"absolute",top:6,width:"100%",children:(0,t.jsxs)(b.C,{alignItems:"center",justifyContent:"center",direction:"column",children:[(0,t.jsx)(D.G,{as:Ao.c,color:"",width:"160px",height:"88px"}),(0,t.jsx)(h.k,{paddingTop:6,paddingBottom:4,children:(0,t.jsxs)(h.k,{textAlign:"center",children:[(0,t.jsx)(j.O,{variant:"delta",as:"p",textColor:"neutral600",children:e({id:c("modalForm.empty.heading"),defaultMessage:"Nothing in here yet."})}),(0,t.jsx)(h.k,{paddingTop:4,children:(0,t.jsx)(j.O,{variant:"delta",as:"p",textColor:"neutral600",children:e({id:c("modalForm.empty.sub-heading"),defaultMessage:"Find what you are looking for through a wide range of extensions."})})})]})}),(0,t.jsx)(ne.E,{to:`/marketplace?${Eo.stringify({categories:["Custom fields"]})}`,variant:"secondary",startIcon:(0,t.jsx)(Ue.c,{}),children:e({id:c("modalForm.empty.button"),defaultMessage:"Add custom fields"})})]})})]})},Jo=()=>{const{formatMessage:e}=(0,H.c)(),a=(0,N.QV)(),s=Object.entries(a.getAll());if(!s.length)return(0,t.jsx)(Xo,{});const i=s.sort((o,l)=>o[1].name>l[1].name?1:-1);return(0,t.jsx)(W.a,{tagName:"button",children:(0,t.jsxs)(b.C,{direction:"column",alignItems:"stretch",gap:3,children:[(0,t.jsx)(J.y,{gap:3,children:i.map(([o,l])=>(0,t.jsx)(q.C,{col:6,children:(0,t.jsx)(Qo,{customFieldUid:o,customField:l},o)},o))}),(0,t.jsx)(Pt.c,{href:"https://docs.strapi.io/developer-docs/latest/development/custom-fields.html",isExternal:!0,children:e({id:c("modalForm.tabs.custom.howToLink"),defaultMessage:"How to add custom fields"})})]})})},Ko=({attributes:e,forTarget:a,kind:s})=>{const{formatMessage:i}=(0,H.c)(),o=c("modalForm.tabs.default"),l=c("modalForm.tabs.custom"),r=a.includes("component")?"component":s,d=c(`modalForm.sub-header.chooseAttribute.${r}`);return(0,t.jsx)(Ie.a,{padding:7,children:(0,t.jsxs)(re.M,{label:i({id:c("modalForm.tabs.label"),defaultMessage:"Default and Custom types tabs"}),id:"attribute-type-tabs",variant:"simple",children:[(0,t.jsxs)(b.C,{justifyContent:"space-between",children:[(0,t.jsx)(j.O,{variant:"beta",as:"h2",children:i({id:d,defaultMessage:"Select a field"})}),(0,t.jsxs)(oe.k,{children:[(0,t.jsx)(oe.s,{children:i({id:o,defaultMessage:"Default"})}),(0,t.jsx)(oe.s,{children:i({id:l,defaultMessage:"Custom"})})]})]}),(0,t.jsx)(h.k,{paddingBottom:6,children:(0,t.jsx)(ee.c,{})}),(0,t.jsxs)(ae.o,{children:[(0,t.jsx)(ae.G,{children:(0,t.jsx)(Go,{attributes:e})}),(0,t.jsx)(ae.G,{children:(0,t.jsx)(Jo,{})})]})]})})},wo=({intlLabel:e,name:a,options:s,onChange:i,value:o=null})=>{const{formatMessage:l}=(0,H.c)(),r=e.id?l({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):a,d=g=>{let m="";g==="true"&&(m=!0),g==="false"&&(m=!1),i({target:{name:a,value:m,type:"select-default-boolean"}})};return(0,t.jsx)(te.M,{label:r,id:a,name:a,onChange:d,value:(o===null?"":o).toString(),children:s.map(({metadatas:{intlLabel:g,disabled:m,hidden:p},key:u,value:I})=>(0,t.jsx)(Ae.c,{value:I,disabled:m,hidden:p,children:g.defaultMessage},u))})},qo=(0,Me.default)(b.C)`
  position: relative;
  align-items: stretch;

  label {
    border-radius: 4px;
    max-width: 50%;
    cursor: pointer;
    user-select: none;
    flex: 1;
    ${(0,Ne.Ih)()}
  }

  input {
    position: absolute;
    opacity: 0;
  }

  .option {
    height: 100%;
    border-radius: 4px;
    border: 1px solid ${({theme:e})=>e.colors.neutral200};
    will-change: transform, opacity;
    background: ${({theme:e})=>e.colors.neutral0};

    .checkmark {
      position: relative;
      display: block;
      will-change: transform;
      background: ${({theme:e})=>e.colors.neutral0};
      width: ${({theme:e})=>e.spaces[5]};
      height: ${({theme:e})=>e.spaces[5]};
      border: solid 1px ${({theme:e})=>e.colors.neutral300};
      border-radius: 50%;

      &:before,
      &:after {
        content: '';
        display: block;
        border-radius: 50%;
        width: ${({theme:e})=>e.spaces[3]};
        height: ${({theme:e})=>e.spaces[3]};
        position: absolute;
        top: 3px;
        left: 3px;
      }

      &:after {
        transform: scale(0);
        transition: inherit;
        will-change: transform;
      }
    }
  }

  .container input:checked ~ div {
    background: ${({theme:e})=>e.colors.primary100};
    ${j.O} {
      color: ${({theme:e})=>e.colors.primary600};
    }
    border: 1px solid ${({theme:e})=>e.colors.primary200};
    .checkmark {
      border: solid 1px ${({theme:e})=>e.colors.primary600};
      &::after {
        background: ${({theme:e})=>e.colors.primary600};
        transform: scale(1);
      }
    }
  }
`,gt=({intlLabel:e,name:a,onChange:s,radios:i=[],value:o})=>{const{formatMessage:l}=(0,H.c)();return(0,t.jsxs)(b.C,{direction:"column",alignItems:"stretch",gap:2,children:[(0,t.jsx)(j.O,{variant:"pi",fontWeight:"bold",textColor:"neutral800",htmlFor:a,as:"label",children:l(e)}),(0,t.jsx)(qo,{gap:4,alignItems:"stretch",children:i.map(r=>(0,t.jsxs)("label",{htmlFor:r.value.toString(),className:"container",children:[(0,t.jsx)("input",{id:r.value.toString(),name:a,className:"option-input",checked:r.value===o,value:r.value,onChange:s,type:"radio"},r.value),(0,t.jsx)(h.k,{className:"option",padding:4,children:(0,t.jsxs)(b.C,{children:[(0,t.jsx)(h.k,{paddingRight:4,children:(0,t.jsx)("span",{className:"checkmark"})}),(0,t.jsxs)(b.C,{direction:"column",alignItems:"stretch",gap:2,children:[(0,t.jsx)(j.O,{fontWeight:"bold",children:l(r.title)}),(0,t.jsx)(j.O,{variant:"pi",textColor:"neutral600",children:l(r.description)})]})]})})]},r.value))})]})},_o=({onChange:e,name:a,intlLabel:s,...i})=>{const o=l=>{const r=l.target.value!=="false";e({target:{name:a,value:r,type:"boolean-radio-group"}})};return(0,t.jsx)(gt,{...i,name:a,onChange:o,intlLabel:s})},ei=({error:e,intlLabel:a,modifiedData:s,name:i,onChange:o,value:l=null})=>{const{formatMessage:r}=(0,H.c)(),[d,g]=(0,f.useState)(!!l||l===0),m=a.id?r({id:a.id,defaultMessage:a.defaultMessage},{...a.values}):i,p=s.type==="biginteger"?"text":"number",u=!s.type,I=e?r({id:e,defaultMessage:e}):"";return(0,t.jsxs)(b.C,{direction:"column",alignItems:"stretch",gap:2,children:[(0,t.jsx)(me.y,{id:i,name:i,onValueChange:A=>{o({target:{name:i,value:A?p==="text"?"0":0:null}}),g(z=>!z)},value:d,children:m}),d&&(0,t.jsx)(h.k,{paddingLeft:6,style:{maxWidth:"200px"},children:p==="text"?(0,t.jsx)(ve.g,{label:"","aria-label":m,disabled:u,error:I,id:i,name:i,onChange:o,value:l===null?"":l}):(0,t.jsx)(nt.W,{"aria-label":m,disabled:u,error:I,id:i,name:i,onValueChange:A=>{o({target:{name:i,value:A,type:p}})},value:l||0})})]})},ti=({onChange:e,...a})=>{const s=(0,N.eo)(),i=o=>{s({type:"info",message:{id:c("contentType.kind.change.warning"),defaultMessage:"You just changed the kind of a content type: API will be reset (routes, controllers, and services will be overwritten)."}}),e(o)};return(0,t.jsx)(gt,{...a,onChange:i})},ni=({description:e,disabled:a=!1,intlLabel:s,isCreating:i,name:o,onChange:l,value:r=!1})=>{const{formatMessage:d}=(0,H.c)(),[g,m]=(0,f.useState)(!1),p=s.id?d({id:s.id,defaultMessage:s.defaultMessage},{...s.values}):o,u=e?d({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",I=()=>m(S=>!S),A=()=>{l({target:{name:o,value:!1}}),I()},C=({target:{checked:S}})=>{if(!S&&!i){I();return}l({target:{name:o,value:S}})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(me.y,{checked:r,disabled:a,hint:u,name:o,onChange:C,children:p}),(0,t.jsx)(N.cz,{isOpen:g,onToggleDialog:I,onConfirm:A,bodyText:{id:c("popUpWarning.draft-publish.message"),defaultMessage:"If you disable the draft & publish, your drafts will be deleted."},leftButtonText:{id:"components.popUpWarning.button.cancel",defaultMessage:"No, cancel"},rightButtonText:{id:c("popUpWarning.draft-publish.button.confirm"),defaultMessage:"Yes, disable"}})]})},ai=({categoryName:e,deleteCategory:a,deleteComponent:s,deleteContentType:i,isAttributeModal:o,isCustomFieldModal:l,isComponentAttribute:r,isComponentToDzModal:d,isContentTypeModal:g,isCreatingComponent:m,isCreatingComponentAttribute:p,isCreatingComponentInDz:u,isCreatingComponentWhileAddingAField:I,isCreatingContentType:A,isCreatingDz:C,isComponentModal:S,isDzAttribute:z,isEditingAttribute:M,isEditingCategory:L,isInFirstComponentStep:U,onSubmitAddComponentAttribute:B,onSubmitAddComponentToDz:K,onSubmitCreateContentType:de,onSubmitCreateComponent:be,onSubmitCreateDz:Z,onSubmitEditAttribute:ye,onSubmitEditCategory:w,onSubmitEditComponent:xe,onSubmitEditContentType:pe,onSubmitEditCustomFieldAttribute:se,onSubmitEditDz:Re,onClickFinish:ue})=>{const{formatMessage:X}=(0,H.c)();return d?u?(0,t.jsx)(_.Z,{variant:"secondary",type:"submit",onClick:F=>{F.preventDefault(),K(F,!0)},startIcon:(0,t.jsx)(Ue.c,{}),children:X({id:c("form.button.add-first-field-to-created-component"),defaultMessage:"Add first field to the component"})}):(0,t.jsx)(_.Z,{variant:"default",type:"submit",onClick:F=>{F.preventDefault(),K(F,!1)},children:X({id:"global.finish",defaultMessage:"Finish"})}):o&&z&&!C?(0,t.jsx)(_.Z,{variant:"default",type:"submit",onClick:F=>{F.preventDefault(),ue(),Re(F,!1)},children:X({id:"global.finish",defaultMessage:"Finish"})}):o&&z&&C?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(_.Z,{variant:"secondary",type:"submit",onClick:F=>{F.preventDefault(),Z(F,!0)},startIcon:(0,t.jsx)(Ue.c,{}),children:X({id:c("form.button.add-components-to-dynamiczone"),defaultMessage:"Add components to the zone"})})}):o&&r?U?(0,t.jsx)(_.Z,{variant:"secondary",type:"submit",onClick:F=>{F.preventDefault(),B(F,!0)},children:X(p?{id:c("form.button.configure-component"),defaultMessage:"Configure the component"}:{id:c("form.button.select-component"),defaultMessage:"Configure the component"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.Z,{variant:"secondary",type:"submit",onClick:F=>{F.preventDefault(),B(F,!0)},startIcon:(0,t.jsx)(Ue.c,{}),children:X(I?{id:c("form.button.add-first-field-to-created-component"),defaultMessage:"Add first field to the component"}:{id:c("form.button.add-field"),defaultMessage:"Add another field"})}),(0,t.jsx)(_.Z,{variant:"default",type:"button",onClick:F=>{F.preventDefault(),ue(),B(F,!1)},children:X({id:"global.finish",defaultMessage:"Finish"})})]}):o&&!r&&!z?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.Z,{type:M?"button":"submit",variant:"secondary",onClick:F=>{F.preventDefault(),ye(F,!0)},startIcon:(0,t.jsx)(Ue.c,{}),children:X({id:c("form.button.add-field"),defaultMessage:"Add another field"})}),(0,t.jsx)(_.Z,{type:M?"submit":"button",variant:"default",onClick:F=>{F.preventDefault(),ue(),ye(F,!1)},children:X({id:"global.finish",defaultMessage:"Finish"})})]}):g?(0,t.jsxs)(t.Fragment,{children:[!A&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.Z,{type:"button",variant:"danger",onClick:F=>{F.preventDefault(),i()},children:X({id:"global.delete",defaultMessage:"Delete"})}),(0,t.jsx)(_.Z,{type:"submit",variant:"default",onClick:F=>{F.preventDefault(),pe(F,!1)},children:X({id:"global.finish",defaultMessage:"Finish"})})]}),A&&(0,t.jsx)(_.Z,{type:"submit",variant:"secondary",onClick:F=>{F.preventDefault(),de(F,!0)},children:X({id:"global.continue",defaultMessage:"Continue"})})]}):S?(0,t.jsxs)(t.Fragment,{children:[!m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.Z,{type:"button",variant:"danger",onClick:F=>{F.preventDefault(),s()},children:X({id:"global.delete",defaultMessage:"Delete"})}),(0,t.jsx)(_.Z,{type:"submit",variant:"default",onClick:F=>{F.preventDefault(),xe(F,!1)},children:X({id:"global.finish",defaultMessage:"Finish"})})]}),m&&(0,t.jsx)(_.Z,{type:"submit",variant:"secondary",onClick:F=>{F.preventDefault(),be(F,!0)},children:X({id:"global.continue",defaultMessage:"Continue"})})]}):L?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.Z,{type:"button",variant:"danger",onClick:F=>{F.preventDefault(),e&&a(e)},children:X({id:"global.delete",defaultMessage:"Delete"})}),(0,t.jsx)(_.Z,{type:"submit",variant:"default",onClick:F=>{F.preventDefault(),w(F)},children:X({id:"global.finish",defaultMessage:"finish"})})]}):l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.Z,{type:M?"button":"submit",variant:"secondary",onClick:F=>{F.preventDefault(),se(F,!0)},startIcon:(0,t.jsx)(Ue.c,{}),children:X({id:c("form.button.add-field"),defaultMessage:"Add another field"})}),(0,t.jsx)(_.Z,{type:M?"submit":"button",variant:"default",onClick:F=>{F.preventDefault(),ue(),se(F,!1)},children:X({id:"global.finish",defaultMessage:"Finish"})})]}):null},si=({actionType:e=null,attributeName:a,attributeType:s,categoryName:i,contentTypeKind:o,dynamicZoneTarget:l,forTarget:r,modalType:d=null,targetUid:g,customFieldUid:m=null,showBackLink:p=!1})=>{const{formatMessage:u}=(0,H.c)(),{modifiedData:I}=De(),{onOpenModalAddField:A}=Ge();let C="component",S=[];const z=I?.[r]?.[g]||I?.[r]||null,M=z?.schema.displayName;if(d==="contentType"&&(C=o),["component","editCategory"].includes(d||"")&&(C="component"),["component","contentType"].includes(d||"")){let U=c(`modalForm.component.header-${e}`);return d==="contentType"&&(U=c(`modalForm.${o}.header-create`)),e==="edit"&&(U=c("modalForm.header-edit")),(0,t.jsx)(Je.k,{children:(0,t.jsxs)(b.C,{children:[(0,t.jsx)(h.k,{children:(0,t.jsx)(we,{type:C})}),(0,t.jsx)(h.k,{paddingLeft:3,children:(0,t.jsx)(j.O,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title",children:u({id:U},{name:M})})})]})})}return S=[{label:M,info:{category:z?.category||null,name:z?.schema.displayName}}],d==="chooseAttribute"&&(C=["component","components"].includes(r)?"component":z.schema.kind),d==="addComponentToDynamicZone"&&(C="dynamiczone",S.push({label:l})),(d==="attribute"||d==="customField")&&(C=s,S.push({label:a})),d==="editCategory"&&(S=[{label:u({id:c("modalForm.header.categories"),defaultMessage:"Categories"})},{label:i}]),(0,t.jsx)(Je.k,{children:(0,t.jsxs)(b.C,{gap:3,children:[p&&(0,t.jsx)(Pt.c,{"aria-label":u({id:c("modalForm.header.back"),defaultMessage:"Back"}),startIcon:(0,t.jsx)(Ut.c,{}),onClick:()=>A({forTarget:r,targetUid:g}),href:"#back",isExternal:!1}),(0,t.jsx)(we,{type:C,customField:m}),(0,t.jsx)(aa.M,{label:S.map(({label:U})=>U).join(","),children:S.map(({label:U,info:B},K,de)=>{if(U=$e(U),!U)return null;const be=`${U}.${K}`;return B?.category&&(U=`${U} (${$e(B.category)} - ${$e(B.name)})`),(0,t.jsx)(sa.i,{isCurrent:K===de.length-1,children:U},be)})})]})})},oi=({modalType:e,forTarget:a,kind:s,actionType:i,step:o})=>{switch(e){case"chooseAttribute":return c(`modalForm.sub-header.chooseAttribute.${a?.includes("component")?"component":s||"collectionType"}`);case"attribute":return c(`modalForm.sub-header.attribute.${i}${o!=="null"&&o!==null&&i!=="edit"?".step":""}`);case"customField":return c(`modalForm.sub-header.attribute.${i}`);case"addComponentToDynamicZone":return c("modalForm.sub-header.addComponentToDynamicZone");default:return c("configurations")}},ii=({actionType:e,modalType:a,forTarget:s,kind:i,step:o,attributeType:l,attributeName:r,customField:d})=>{const{formatMessage:g}=(0,H.c)(),m=a==="customField"?d?.intlLabel:{id:c(`attribute.${l}`)};return(0,t.jsxs)(b.C,{direction:"column",alignItems:"flex-start",paddingBottom:2,gap:1,children:[(0,t.jsx)(j.O,{as:"h2",variant:"beta",children:g({id:oi({actionType:e,forTarget:s,kind:i,step:o,modalType:a}),defaultMessage:"Add new field"},{type:m?$e(g(m)):"",name:$e(r),step:o})}),(0,t.jsx)(j.O,{variant:"pi",textColor:"neutral600",children:g({id:c(`attribute.${l}.description`),defaultMessage:"A type for modeling data"})})]})},ft={alien:oa.c,apps:ia.c,archive:ra.c,arrowDown:la.c,arrowLeft:Ut.c,arrowRight:ca.c,arrowUp:da.c,attachment:ua.c,bell:ma.c,bold:pa.c,book:ga.c,briefcase:fa.c,brush:ha.c,bulletList:ya.c,calendar:va.c,car:ba.c,cast:xa.c,chartBubble:Ca.c,chartCircle:Ta.c,chartPie:Ma.c,check:ja.c,clock:Sa.c,cloud:Aa.c,code:Na.c,cog:Fa.c,collapse:Oa.c,command:La.c,connector:Ea.c,crop:Ia.c,crown:$a.c,cube:Da.c,cup:Ra.c,cursor:Pa.c,dashboard:Ua.c,database:Ba.c,discuss:ka.c,doctor:Wa.c,earth:za.c,emotionHappy:Za.c,emotionUnhappy:Va.c,envelop:Ga.c,exit:Qa.c,expand:Ha.c,eye:Ya.c,feather:Xa.c,file:Ja.c,fileError:Ka.c,filePdf:wa.c,filter:qa.c,folder:_a.c,gate:es.c,gift:ts.c,globe:ns.c,grid:as.c,handHeart:ss.c,hashtag:os.c,headphone:is.c,heart:rs.c,house:ls.c,information:cs.c,italic:ds.c,key:us.c,landscape:ms.c,layer:ps.c,layout:gs.c,lightbulb:fs.c,link:hs.c,lock:ys.c,magic:vs.c,manyToMany:Bt.c,manyToOne:kt.c,manyWays:Wt.c,medium:bs.c,message:xs.c,microphone:Cs.c,monitor:Ts.c,moon:Ms.c,music:js.c,oneToMany:zt.c,oneToOne:Zt.c,oneWay:Vt.c,paint:Ss.c,paintBrush:As.c,paperPlane:Ns.c,pencil:Fs.c,phone:Os.c,picture:Ls.c,pin:Es.c,pinMap:Is.c,plane:$s.c,play:Ds.c,plus:Ue.c,priceTag:Rs.c,puzzle:Ps.c,question:Us.c,quote:Bs.c,repeat:ks.c,restaurant:Ws.c,rocket:zs.c,rotate:Zs.c,scissors:Vs.c,search:Gt.c,seed:Gs.c,server:Qs.c,shield:Hs.c,shirt:Ys.c,shoppingCart:Xs.c,slideshow:Js.c,stack:Ks.c,star:ws.c,store:qs.c,strikeThrough:_s.c,sun:eo.c,television:to.c,thumbDown:no.c,thumbUp:ao.c,train:so.c,twitter:oo.c,typhoon:io.c,underline:ro.c,user:lo.c,volumeMute:co.c,volumeUp:uo.c,walk:mo.c,wheelchair:po.c,write:go.c},ri=(0,Me.default)(b.C)`
  label {
    ${(0,Ne.Ih)()}
    border-radius: ${({theme:e})=>e.borderRadius};
    border: 1px solid ${({theme:e})=>e.colors.neutral100};
  }
`,li=({iconKey:e,name:a,onChange:s,isSelected:i,ariaLabel:o})=>(0,t.jsx)(at.I,{name:a,required:!1,children:(0,t.jsxs)(Rn.u,{htmlFor:e,id:`${e}-label`,children:[(0,t.jsxs)(Pn.K,{children:[(0,t.jsx)(Un.e,{type:"radio",id:e,name:a,checked:i,onChange:s,value:e,"aria-checked":i,"aria-labelledby":`${e}-label`}),o]}),(0,t.jsx)(b.C,{padding:2,cursor:"pointer",hasRadius:!0,background:i?"primary200":void 0,children:(0,t.jsx)(D.G,{as:ft[e],color:i?"primary600":"neutral300"})})]})}),ci=({intlLabel:e,name:a,onChange:s,value:i=""})=>{const{formatMessage:o}=(0,H.c)(),[l,r]=(0,f.useState)(!1),[d,g]=(0,f.useState)(""),m=Object.keys(ft),[p,u]=(0,f.useState)(m),I=(0,f.useRef)(null),A=(0,f.useRef)(null),C=()=>{r(!l)},S=({target:{value:L}})=>{g(L),u(()=>m.filter(U=>U.toLowerCase().includes(L.toLowerCase())))},z=()=>{C(),g(""),u(m)},M=()=>{s({target:{name:a,value:""}})};return(0,f.useEffect)(()=>{l&&A.current?.focus()},[l]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(b.C,{justifyContent:"space-between",paddingBottom:2,children:[(0,t.jsx)(j.O,{variant:"pi",fontWeight:"bold",textColor:"neutral800",as:"label",children:o(e)}),(0,t.jsxs)(b.C,{gap:1,children:[l?(0,t.jsx)(Bn.E,{ref:A,name:"searchbar",size:"S",placeholder:o({id:c("ComponentIconPicker.search.placeholder"),defaultMessage:"Search for an icon"}),onBlur:()=>{d||C()},onChange:S,value:d,onClear:z,clearLabel:o({id:c("IconPicker.search.clear.label"),defaultMessage:"Clear the icon search"}),children:o({id:c("IconPicker.search.placeholder.label"),defaultMessage:"Search for an icon"})}):(0,t.jsx)($t.w,{ref:I,onClick:C,"aria-label":o({id:c("IconPicker.search.button.label"),defaultMessage:"Search icon button"}),icon:(0,t.jsx)(Gt.c,{}),noBorder:!0}),i&&(0,t.jsx)(kn.o,{description:o({id:c("IconPicker.remove.tooltip"),defaultMessage:"Remove the selected icon"}),children:(0,t.jsx)($t.w,{onClick:M,"aria-label":o({id:c("IconPicker.remove.button"),defaultMessage:"Remove the selected icon button"}),icon:(0,t.jsx)(No.c,{}),noBorder:!0})})]})]}),(0,t.jsx)(ri,{position:"relative",padding:1,background:"neutral100",hasRadius:!0,wrap:"wrap",gap:2,maxHeight:"126px",overflow:"auto",textAlign:"center",children:p.length>0?p.map(L=>(0,t.jsx)(li,{iconKey:L,name:a,onChange:s,isSelected:L===i,ariaLabel:o({id:c("IconPicker.icon.label"),defaultMessage:"Select {icon} icon"},{icon:L})},L)):(0,t.jsx)(h.k,{padding:4,grow:2,children:(0,t.jsx)(j.O,{variant:"delta",textColor:"neutral600",textAlign:"center",children:o({id:c("IconPicker.emptyState.label"),defaultMessage:"No icon found"})})})})]})},di=({description:e,error:a,intlLabel:s,modifiedData:i,name:o,onChange:l,value:r})=>{const{formatMessage:d}=(0,H.c)(),g=(0,f.useRef)(l),m=i?.displayName||"";(0,f.useEffect)(()=>{if(m){const A=(0,x.n)(m);try{const C=it(A,2);g.current({target:{name:o,value:C}})}catch{g.current({target:{name:o,value:A}})}}else g.current({target:{name:o,value:""}})},[m,o]);const p=a?d({id:a,defaultMessage:a}):"",u=e?d({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",I=d(s);return(0,t.jsx)(ve.g,{error:p,label:I,id:o,hint:u,name:o,onChange:l,value:r||""})},ui=({oneThatIsCreatingARelationWithAnother:e,target:a})=>{const{contentTypes:s,sortedContentTypesList:i}=De(),o=(0,Ve.OY)(),l=i.filter(an),{plugin:r=null,schema:{displayName:d}={displayName:"error"}}=s?.[a]??{},g=({uid:m,plugin:p,title:u,restrictRelationsTo:I})=>()=>{const A=p?`${p}_${u}`:u;o({type:x.O,target:{value:m,oneThatIsCreatingARelationWithAnother:e,selectedContentTypeFriendlyName:A,targetContentTypeAllowedRelations:I}})};return(0,t.jsxs)(st.Ss,{children:[(0,t.jsx)(mi,{children:`${d} ${r?`(from: ${r})`:""}`}),(0,t.jsx)(st.kP,{zIndex:5,children:l.map(({uid:m,title:p,restrictRelationsTo:u,plugin:I})=>(0,t.jsxs)(st.iY,{onSelect:g({uid:m,plugin:I,title:p,restrictRelationsTo:u}),children:[p,"\xA0",I&&(0,t.jsxs)(t.Fragment,{children:["(from: ",I,")"]})]},m))})]})},mi=(0,Me.default)(st.mf)`
  svg {
    width: ${6/16}rem;
    height: ${4/16}rem;
  }
`,rn=({disabled:e=!1,error:a,header:s,isMain:i=!1,name:o,onChange:l,oneThatIsCreatingARelationWithAnother:r="",target:d="",value:g=""})=>(0,t.jsxs)(h.k,{background:"neutral100",hasRadius:!0,borderColor:"neutral200",children:[(0,t.jsx)(b.C,{paddingTop:i?4:1,paddingBottom:i?3:1,justifyContent:"center",children:i?(0,t.jsx)(j.O,{variant:"pi",fontWeight:"bold",textColor:"neutral800",children:s}):(0,t.jsx)(ui,{target:d,oneThatIsCreatingARelationWithAnother:r})}),(0,t.jsx)(ee.c,{background:"neutral200"}),(0,t.jsx)(h.k,{padding:4,children:(0,t.jsx)(N.u,{disabled:e,error:a?.id||null,intlLabel:{id:c("form.attribute.item.defineRelation.fieldName"),defaultMessage:"Field name"},name:o,onChange:l,type:"text",value:g})})]}),pi=(0,Me.default)(h.k)`
  position: relative;
  width: 100%;
  &::before {
    content: '';
    position: absolute;
    top: calc(50% - 0px);
    height: 2px;
    width: 100%;
    background-color: ${({theme:e})=>e.colors.primary600};
    z-index: 0;
  }
`,gi=(0,Me.default)(h.k)`
  background: ${({theme:e,isSelected:a})=>e.colors[a?"primary100":"neutral0"]};
  border: 1px solid
    ${({theme:e,isSelected:a})=>e.colors[a?"primary700":"neutral200"]};
  border-radius: ${({theme:e})=>e.borderRadius};
  z-index: 1;
  svg {
    width: 1.5rem;
    height: 100%;
    path {
      fill: ${({theme:e,isSelected:a})=>e.colors[a?"primary700":"neutral500"]};
    }
  }
  &:disabled {
    cursor: not-allowed;
  }
`,fi=(0,Me.default)(b.C)`
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
`,hi={oneWay:Vt.c,oneToOne:Zt.c,oneToMany:zt.c,manyToOne:kt.c,manyToMany:Bt.c,manyWay:Wt.c},yi=({naturePickerType:e,oneThatIsCreatingARelationWithAnother:a,relationType:s,target:i})=>{const o=(0,Ve.OY)(),{formatMessage:l}=(0,H.c)(),{contentTypes:r,modifiedData:d}=De(),g=["oneWay","oneToOne","oneToMany","manyToOne","manyToMany","manyWay"],m=["oneWay","manyWay"],u=(e==="contentType"?$(d,[e,"schema","kind"],""):e)==="collectionType"?g:m,I=s==="manyToOne",A=$(r,[i,"schema","displayName"],"unknown"),C=I?A:a,S=I?a:A,z=it(C,s==="manyToMany"?2:1),M=$(r,[i,"schema","restrictRelationsTo"],null),L=it(S,["manyToMany","oneToMany","manyToOne","manyWay"].includes(s)?2:1);return s?(0,t.jsxs)(b.C,{style:{flex:1},children:[(0,t.jsx)(pi,{children:(0,t.jsx)(b.C,{paddingLeft:9,paddingRight:9,paddingTop:1,justifyContent:"center",children:(0,t.jsx)(W.a,{tagName:"button",children:(0,t.jsx)(b.C,{gap:3,children:u.map(U=>{const B=hi[U],K=M===null||M.includes(U);return(0,t.jsx)(gi,{as:"button",isSelected:s===U,disabled:!K,onClick:()=>{K&&o({type:x.a,target:{oneThatIsCreatingARelationWithAnother:a,targetContentType:i,value:U}})},padding:2,type:"button",children:(0,t.jsx)(B,{},U)},U)})})})})}),(0,t.jsxs)(fi,{justifyContent:"center",children:[(0,t.jsxs)(j.O,{children:[wt(z,{length:24}),"\xA0"]}),(0,t.jsxs)(j.O,{textColor:"primary600",children:[l({id:c(`relation.${s}`)}),"\xA0"]}),(0,t.jsx)(j.O,{children:wt(L,{length:24})})]})]}):null},vi=({formErrors:e,mainBoxHeader:a,modifiedData:s,naturePickerType:i,onChange:o})=>{const l=(0,x.g)(s.relation,s.targetAttribute);return(0,t.jsxs)(b.C,{style:{position:"relative"},children:[(0,t.jsx)(rn,{isMain:!0,header:a,error:e?.name||null,name:"name",onChange:o,value:s?.name||""}),(0,t.jsx)(yi,{naturePickerType:i,oneThatIsCreatingARelationWithAnother:a,relationType:l,target:s.target}),(0,t.jsx)(rn,{disabled:["oneWay","manyWay"].includes(l),error:e?.targetAttribute||null,name:"targetAttribute",onChange:o,oneThatIsCreatingARelationWithAnother:a,target:s.target,value:s?.targetAttribute||""})]})},bi=({error:e=null,intlLabel:a,name:s,onChange:i,value:o=void 0})=>{const{formatMessage:l}=(0,H.c)(),{allComponentsCategories:r}=De(),[d,g]=(0,f.useState)(r),m=e?l({id:e,defaultMessage:e}):"",p=l(a),u=A=>{i({target:{name:s,value:A,type:"select-category"}})},I=A=>{g(C=>[...C,A]),u(A)};return(0,t.jsx)(Wn.cT,{error:m,id:s,label:p,name:s,onChange:u,onCreateOption:I,value:o,children:d.map(A=>(0,t.jsx)(zn.m,{value:A,children:A},A))})},xi=({error:e=null,intlLabel:a,isAddingAComponentToAnotherComponent:s,isCreating:i,isCreatingComponentWhileAddingAField:o,componentToCreate:l,name:r,onChange:d,targetUid:g,forTarget:m,value:p})=>{const{formatMessage:u}=(0,H.c)(),I=e?u({id:e,defaultMessage:e}):"",A=u(a),{componentsGroupedByCategory:C,componentsThatHaveOtherComponentInTheirAttributes:S}=De(),z=["component","components"].includes(m);let M=Object.entries(C).reduce((L,U)=>{const[B,K]=U,de=K.map(be=>({uid:be.uid,label:be.schema.displayName,categoryName:B}));return[...L,...de]},[]);return s&&(M=M.filter(L=>!S.includes(L.uid))),z&&(M=M.filter(L=>L.uid!==g)),o&&(M=[{uid:p,label:l?.displayName,categoryName:l?.category}]),(0,t.jsx)(te.M,{disabled:o||!i,error:I,label:A,id:r,name:r,onChange:L=>{d({target:{name:r,value:L,type:"select-category"}})},value:p||"",children:M.map(L=>(0,t.jsx)(Ae.c,{value:L.uid,children:`${L.categoryName} - ${L.label}`},L.uid))})},Ci=({dynamicZoneTarget:e,intlLabel:a,name:s,onChange:i,value:o})=>{const{formatMessage:l}=(0,H.c)(),{componentsGroupedByCategory:r,modifiedData:d}=De(),m=pt(d.contentType.schema.attributes,e)?.components||[],p=Object.keys(r).reduce((A,C)=>{const S=r[C].filter(({uid:z})=>!m.includes(z));return S.length>0&&(A[C]=S),A},{}),u=Object.entries(p).reduce((A,C)=>{const[S,z]=C,M={label:S,children:z.map(({uid:L,schema:{displayName:U}})=>({label:U,value:L}))};return A.push(M),A},[]),I=l({id:c("components.SelectComponents.displayed-value"),defaultMessage:"{number, plural, =0 {# components} one {# component} other {# components}} selected"},{number:o?.length??0});return(0,t.jsx)(R.U,{id:"select1",label:l(a),customizeContent:()=>I,name:s,onChange:A=>{i({target:{name:s,value:A,type:"select-components"}})},options:u,value:o||[]})},Ti=({intlLabel:e,error:a=void 0,modifiedData:s,name:i,onChange:o,options:l,value:r=""})=>{const{formatMessage:d}=(0,H.c)(),g=d(e),m=a?d({id:a,defaultMessage:a}):"",p=u=>{o({target:{name:i,value:u,type:"select"}}),r&&s.default!==void 0&&s.default!==null&&o({target:{name:"default",value:null}})};return(0,t.jsx)(te.M,{error:m,label:g,id:i,name:i,onChange:p,value:r||"",children:l.map(({metadatas:{intlLabel:u,disabled:I,hidden:A},key:C,value:S})=>(0,t.jsx)(Ae.c,{value:S,disabled:I,hidden:A,children:d({id:u.id,defaultMessage:u.defaultMessage},u.values)},C))})},ln=({intlLabel:e,error:a=void 0,modifiedData:s,name:i,onChange:o,options:l,value:r=""})=>{const{formatMessage:d}=(0,H.c)(),g=d(e),m=a?d({id:a,defaultMessage:a}):"",p=u=>{o({target:{name:i,value:u,type:"select"}}),r&&(u==="biginteger"&&r!=="biginteger"&&(s.default!==void 0&&s.default!==null&&o({target:{name:"default",value:null}}),s.max!==void 0&&s.max!==null&&o({target:{name:"max",value:null}}),s.min!==void 0&&s.min!==null&&o({target:{name:"min",value:null}})),typeof u=="string"&&["decimal","float","integer"].includes(u)&&r==="biginteger"&&(s.default!==void 0&&s.default!==null&&o({target:{name:"default",value:null}}),s.max!==void 0&&s.max!==null&&o({target:{name:"max",value:null}}),s.min!==void 0&&s.min!==null&&o({target:{name:"min",value:null}})))};return(0,t.jsx)(te.M,{error:m,label:g,id:i,name:i,onChange:p,value:r||"",children:l.map(({metadatas:{intlLabel:u,disabled:I,hidden:A},key:C,value:S})=>(0,t.jsx)(Ae.c,{value:S,disabled:I,hidden:A,children:d(u)},C))})};ln.defaultProps={error:void 0,value:""};const Mi=({description:e=null,error:a=null,intlLabel:s,modifiedData:i,name:o,onChange:l,value:r=null})=>{const{formatMessage:d}=(0,H.c)(),g=(0,f.useRef)(l),m=i?.displayName||"";(0,f.useEffect)(()=>{m?g.current({target:{name:o,value:(0,x.n)(m)}}):g.current({target:{name:o,value:""}})},[m,o]);const p=a?d({id:a,defaultMessage:a}):"",u=e?d({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",I=d(s);return(0,t.jsx)(ve.g,{error:p,label:I,id:o,hint:u,name:o,onChange:l,value:r||""})},cn=({form:e,formErrors:a,genericInputProps:s,modifiedData:i,onChange:o})=>{const{formatMessage:l}=(0,H.c)();return(0,t.jsx)(t.Fragment,{children:e.map((r,d)=>r.items.length===0?null:(0,t.jsxs)(h.k,{children:[r.sectionTitle&&(0,t.jsx)(h.k,{paddingBottom:4,children:(0,t.jsx)(j.O,{variant:"delta",as:"h3",children:l(r.sectionTitle)})}),(0,t.jsx)(J.y,{gap:4,children:r.items.map((g,m)=>{const p=`${d}.${m}`,u=$(i,g.name,void 0),I=Object.keys(a).find(C=>C===g.name),A=I?a[I].id:$(a,[...g.name.split(".").filter(C=>C!=="componentToCreate"),"id"],null);return g.type==="pushRight"?(0,t.jsx)(q.C,{col:g.size||6,children:(0,t.jsx)("div",{})},g.name||p):(0,t.jsx)(q.C,{col:g.size||6,children:(0,t.jsx)(N.u,{...g,...s,error:A,onChange:o,value:u})},g.name||p)})})]},d))})},ji=({description:e=null,disabled:a=!1,error:s="",intlLabel:i,labelAction:o,name:l,onChange:r,placeholder:d=null,value:g=""})=>{const{formatMessage:m}=(0,H.c)(),p=s?m({id:s,defaultMessage:s}):"",u=e?m({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",I=m(i),A=d?m({id:d.id,defaultMessage:d.defaultMessage},{...d.values}):"",C=Array.isArray(g)?g.join(`
`):"",S=z=>{const M=z.target.value.split(`
`);r({target:{name:l,value:M}})};return(0,t.jsx)(Zn.A,{disabled:a,error:p,label:I,labelAction:o,id:l,hint:u,name:l,onChange:S,placeholder:A,value:C,children:C})},Ee={name:"name",type:"text",intlLabel:{id:"global.name",defaultMessage:"Name"},description:{id:c("modalForm.attribute.form.base.name.description"),defaultMessage:"No space is allowed for the name of the attribute"}},Si={sections:[{sectionTitle:null,items:[Ee]}]},Qe={base(e=""){return[{sectionTitle:null,items:[{name:`${e}displayName`,type:"text",intlLabel:{id:c("contentType.displayName.label"),defaultMessage:"Display Name"}},{name:`${e}category`,type:"select-category",intlLabel:{id:c("modalForm.components.create-component.category.label"),defaultMessage:"Select a category or enter a name to create a new one"}}]},{sectionTitle:null,items:[{name:`${e}icon`,type:"icon-picker",size:12,intlLabel:{id:c("modalForm.components.icon.label"),defaultMessage:"Icon"}}]}]},advanced(){return[]}},O={default:{name:"default",type:"text",intlLabel:{id:c("form.attribute.settings.default"),defaultMessage:"Default value"}},max:{name:"max",type:"checkbox-with-number-field",intlLabel:{id:c("form.attribute.item.maximum"),defaultMessage:"Maximum value"}},maxLength:{name:"maxLength",type:"checkbox-with-number-field",intlLabel:{id:c("form.attribute.item.maximumLength"),defaultMessage:"Maximum length"}},min:{name:"min",type:"checkbox-with-number-field",intlLabel:{id:c("form.attribute.item.minimum"),defaultMessage:"Minimum value"}},minLength:{name:"minLength",type:"checkbox-with-number-field",intlLabel:{id:c("form.attribute.item.minimumLength"),defaultMessage:"Minimum length"}},private:{name:"private",type:"checkbox",intlLabel:{id:c("form.attribute.item.privateField"),defaultMessage:"Private field"},description:{id:c("form.attribute.item.privateField.description"),defaultMessage:"This field will not show up in the API response"}},regex:{intlLabel:{id:c("form.attribute.item.text.regex"),defaultMessage:"RegExp pattern"},name:"regex",type:"text",description:{id:c("form.attribute.item.text.regex.description"),defaultMessage:"The text of the regular expression"}},required:{name:"required",type:"checkbox",intlLabel:{id:c("form.attribute.item.requiredField"),defaultMessage:"Required field"},description:{id:c("form.attribute.item.requiredField.description"),defaultMessage:"You won't be able to create an entry if this field is empty"}},unique:{name:"unique",type:"checkbox",intlLabel:{id:c("form.attribute.item.uniqueField"),defaultMessage:"Unique field"},description:{id:c("form.attribute.item.uniqueField.description"),defaultMessage:"You won't be able to create an entry if there is an existing entry with identical content"}}},Ai={blocks(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[O.required,O.private]}]}},boolean(){return{sections:[{sectionTitle:null,items:[{autoFocus:!0,type:"select-default-boolean",intlLabel:{id:c("form.attribute.settings.default"),defaultMessage:"Default value"},name:"default",options:[{value:"true",key:"true",metadatas:{intlLabel:{id:"true",defaultMessage:"true"}}},{value:"",key:"null",metadatas:{intlLabel:{id:"null",defaultMessage:"null"}}},{value:"false",key:"false",metadatas:{intlLabel:{id:"false",defaultMessage:"false"}}}]}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[O.required,O.private]}]}},component({repeatable:e},a){return a==="1"?{sections:Qe.advanced()}:e?{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[O.required,O.private,O.max,O.min]}]}:{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[O.required,O.private]}]}},date({type:e}){return{sections:[{sectionTitle:null,items:[{...O.default,type:e||"date",value:null,withDefaultValue:!1,disabled:!e,autoFocus:!1}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[O.required,O.unique,O.private]}]}},dynamiczone(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[O.required,O.max,O.min]}]}},email(){return{sections:[{sectionTitle:null,items:[{...O.default,type:"email"}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[O.required,O.unique,O.maxLength,O.minLength,O.private]}]}},enumeration(e){return{sections:[{sectionTitle:null,items:[{name:"default",type:"select",intlLabel:{id:c("form.attribute.settings.default"),defaultMessage:"Default value"},validations:{},options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"}}},...(e.enum||[]).filter((a,s)=>e.enum.indexOf(a)===s&&a).map(a=>({key:a,value:a,metadatas:{intlLabel:{id:`${a}.no-override`,defaultMessage:a}}}))]},{intlLabel:{id:c("form.attribute.item.enumeration.graphql"),defaultMessage:"Name override for GraphQL"},name:"enumName",type:"text",validations:{},description:{id:c("form.attribute.item.enumeration.graphql.description"),defaultMessage:"Allows you to override the default generated name for GraphQL"}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[O.required,O.private]}]}},json(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[O.required,O.private]}]}},media(){return{sections:[{sectionTitle:null,items:[{intlLabel:{id:c("form.attribute.media.allowed-types"),defaultMessage:"Select allowed types of media"},name:"allowedTypes",type:"allowed-types-select",size:7,value:"",validations:{}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[O.required,O.private]}]}},number(e){const a=e.type==="decimal"||e.type==="float"?"any":1;return{sections:[{sectionTitle:null,items:[{autoFocus:!0,name:"default",type:e.type==="biginteger"?"text":"number",step:a,intlLabel:{id:c("form.attribute.settings.default"),defaultMessage:"Default value"},validations:{}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[O.required,O.unique,O.max,O.min,O.private]}]}},password(){return{sections:[{sectionTitle:null,items:[O.default]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[O.required,O.maxLength,O.minLength,O.private]}]}},relation(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[O.private]}]}},richtext(){return{sections:[{sectionTitle:null,items:[O.default]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[O.required,O.maxLength,O.minLength,O.private]}]}},text(){return{sections:[{sectionTitle:null,items:[O.default,O.regex]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[O.required,O.unique,O.maxLength,O.minLength,O.private]}]}},uid(e){return{sections:[{sectionTitle:null,items:[{...O.default,disabled:Boolean(e.targetField),type:"text"}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[O.required,O.maxLength,O.minLength,O.private]}]}}},ht={intlLabel:{id:"global.type",defaultMessage:"Type"},name:"createComponent",type:"boolean-radio-group",size:12,radios:[{title:{id:c("form.attribute.component.option.create"),defaultMessage:"Create a new component"},description:{id:c("form.attribute.component.option.create.description"),defaultMessage:"A component is shared across types and components, it will be available and accessible everywhere."},value:!0},{title:{id:c("form.attribute.component.option.reuse-existing"),defaultMessage:"Use an existing component"},description:{id:c("form.attribute.component.option.reuse-existing.description"),defaultMessage:"Reuse a component already created to keep your data consistent across content-types."},value:!1}]},dn={advanced:Ai,base:{component(e,a){if(a==="1"){const s=e.createComponent===!0?Qe.base("componentToCreate."):[];return{sections:[{sectionTitle:null,items:[ht]},...s]}}return{sections:[{sectionTitle:null,items:[Ee,{name:"component",type:"select-component",intlLabel:{id:c("modalForm.attributes.select-component"),defaultMessage:"Select a component"},isMultiple:!1}]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"repeatable",type:"boolean-radio-group",size:12,radios:[{title:{id:c("form.attribute.component.option.repeatable"),defaultMessage:"Repeatable component"},description:{id:c("form.attribute.component.option.repeatable.description"),defaultMessage:"Best for multiple instances (array) of ingredients, meta tags, etc.."},value:!0},{title:{id:c("form.attribute.component.option.single"),defaultMessage:"Single component"},description:{id:c("form.attribute.component.option.single.description"),defaultMessage:"Best for grouping fields like full address, main information, etc..."},value:!1}]}]}]}},date(){return{sections:[{sectionTitle:null,items:[Ee,{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",type:"select-date",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},hidden:!0}},{key:"date",value:"date",metadatas:{intlLabel:{id:c("form.attribute.item.date.type.date"),defaultMessage:"date (ex: 01/01/{currentYear})",values:{currentYear:new Date().getFullYear()}}}},{key:"datetime",value:"datetime",metadatas:{intlLabel:{id:c("form.attribute.item.date.type.datetime"),defaultMessage:"datetime (ex: 01/01/{currentYear} 00:00 AM)",values:{currentYear:new Date().getFullYear()}}}},{key:"time",value:"time",metadatas:{intlLabel:{id:c("form.attribute.item.date.type.time"),defaultMessage:"time (ex: 00:00 AM)"}}}]}]}]}},enumeration(){return{sections:[{sectionTitle:null,items:[Ee]},{sectionTitle:null,items:[{name:"enum",type:"textarea-enum",size:6,intlLabel:{id:c("form.attribute.item.enumeration.rules"),defaultMessage:"Values (one line per value)"},placeholder:{id:c("form.attribute.item.enumeration.placeholder"),defaultMessage:`Ex:
morning
noon
evening`},validations:{required:!0}}]}]}},media(){return{sections:[{sectionTitle:null,items:[Ee]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"multiple",size:12,type:"boolean-radio-group",radios:[{title:{id:c("form.attribute.media.option.multiple"),defaultMessage:"Multiple media"},description:{id:c("form.attribute.media.option.multiple.description"),defaultMessage:"Best for sliders, carousels or multiple files download"},value:!0},{title:{id:c("form.attribute.media.option.single"),defaultMessage:"Single media"},description:{id:c("form.attribute.media.option.single.description"),defaultMessage:"Best for avatar, profile picture or cover"},value:!1}]}]}]}},number(){return{sections:[{sectionTitle:null,items:[Ee,{intlLabel:{id:c("form.attribute.item.number.type"),defaultMessage:"Number format"},name:"type",type:"select-number",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},hidden:!0}},{key:"integer",value:"integer",metadatas:{intlLabel:{id:c("form.attribute.item.number.type.integer"),defaultMessage:"integer (ex: 10)"}}},{key:"biginteger",value:"biginteger",metadatas:{intlLabel:{id:c("form.attribute.item.number.type.biginteger"),defaultMessage:"biginteger (ex: 123456789)"}}},{key:"decimal",value:"decimal",metadatas:{intlLabel:{id:c("form.attribute.item.number.type.decimal"),defaultMessage:"decimal (ex: 2.22)"}}},{key:"float",value:"float",metadatas:{intlLabel:{id:c("form.attribute.item.number.type.float"),defaultMessage:"decimal (ex: 3.3333333)"}}}]}]}]}},relation(){return{sections:[{sectionTitle:null,items:[{intlLabel:{id:"FIXME",defaultMessage:"FIXME"},name:"relation",size:12,type:"relation"}]}]}},string(){return{sections:[{sectionTitle:null,items:[Ee]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",size:12,type:"radio-group",radios:[{title:{id:c("form.attribute.text.option.short-text"),defaultMessage:"Sort text"},description:{id:c("form.attribute.text.option.short-text.description"),defaultMessage:"Best for titles, names, links (URL). It also enables exact search on the field."},value:"string"},{title:{id:c("form.attribute.text.option.long-text"),defaultMessage:"Long text"},description:{id:c("form.attribute.text.option.long-text.description"),defaultMessage:"Best for descriptions, biography. Exact search is disabled."},value:"text"}]}]}]}},text(){return{sections:[{sectionTitle:null,items:[Ee]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",size:12,type:"radio-group",radios:[{title:{id:c("form.attribute.text.option.short-text"),defaultMessage:"Sort text"},description:{id:c("form.attribute.text.option.short-text.description"),defaultMessage:"Best for titles, names, links (URL). It also enables exact search on the field."},value:"string"},{title:{id:c("form.attribute.text.option.long-text"),defaultMessage:"Long text"},description:{id:c("form.attribute.text.option.long-text.description"),defaultMessage:"Best for descriptions, biography. Exact search is disabled."},value:"text"}]}]}]}},uid(e,a,s){const i=s.filter(({type:o})=>["string","text"].includes(o)).map(({name:o})=>({key:o,value:o,metadatas:{intlLabel:{id:`${o}.no-override`,defaultMessage:o}}}));return{sections:[{sectionTitle:null,items:[{...Ee,placeholder:{id:c("modalForm.attribute.form.base.name.placeholder"),defaultMessage:"e.g. slug, seoUrl, canonicalUrl"}},{intlLabel:{id:c("modalForm.attribute.target-field"),defaultMessage:"Attached field"},name:"targetField",type:"select",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"global.none",defaultMessage:"None"}}},...i]}]}]}}}},yt=e=>e?$o(e,{decamelize:!1,lowercase:!1,separator:"_"}):"",un=/^[A-Za-z][_0-9A-Za-z]*$/,mn=e=>({name:"attributeNameAlreadyUsed",message:N.aO.unique,test(a){return a?!e.includes(a):!1}}),vt=e=>({name:"forbiddenAttributeName",message:c("error.attributeName.reserved-name"),test(a){return a?!e.includes(a):!1}}),v={default:()=>T.Qb().nullable(),max:()=>T.CQ().integer().nullable(),min:()=>T.CQ().integer().when("max",(e,a)=>e?a.max(e,c("error.validation.minSupMax")):a).nullable(),maxLength:()=>T.CQ().integer().positive(c("error.validation.positive")).nullable(),minLength:()=>T.CQ().integer().min(0).when("maxLength",(e,a)=>e?a.max(e,c("error.validation.minSupMax")):a).nullable(),name(e,a){return T.Qb().test(mn(e)).test(vt(a)).matches(un,N.aO.regex).required(N.aO.required)},required:()=>T.cT(),type:()=>T.Qb().required(N.aO.required),unique:()=>T.cT().nullable()},bt=(e,a)=>({name:v.name(e,a),type:v.type(),default:v.default(),unique:v.unique(),required:v.required(),maxLength:v.maxLength(),minLength:v.minLength(),regex:T.Qb().test({name:"isValidRegExpPattern",message:c("error.validation.regex"),test(i){return new RegExp(i||"")!==null}}).nullable()}),xt=()=>({name:"isMinSuperiorThanMax",message:c("error.validation.minSupMax"),test(e){if(!e)return!0;const{max:a}=this.parent;return!a||Number.isNaN(mt(e))?!0:mt(a)>=mt(e)}}),qe={date(e,a){const s={name:v.name(e,a),type:v.type()};return T.kt(s)},datetime(e,a){const s={name:v.name(e,a),type:v.type()};return T.kt(s)},time(e,a){const s={name:v.name(e,a),type:v.type()};return T.kt(s)},default(e,a){const s={name:v.name(e,a),type:v.type()};return T.kt(s)},biginteger(e,a){const s={name:v.name(e,a),type:v.type(),default:T.Qb().nullable().matches(/^-?\d*$/),unique:v.unique(),required:v.required(),max:T.Qb().nullable().matches(/^-?\d*$/,N.aO.regex),min:T.Qb().nullable().test(xt()).matches(/^-?\d*$/,N.aO.regex)};return T.kt(s)},boolean(e,a){const s={name:v.name(e,a),default:T.cT().nullable(),required:v.required(),unique:v.unique()};return T.kt(s)},component(e,a){const s={name:v.name(e,a),type:v.type(),required:v.required(),max:v.max(),min:v.min(),component:T.Qb().required(N.aO.required)};return T.kt(s)},decimal(e,a){const s={name:v.name(e,a),type:v.type(),default:T.CQ(),required:v.required(),max:T.CQ(),min:T.CQ().test(xt())};return T.kt(s)},dynamiczone(e,a){const s={name:v.name(e,a),type:v.type(),required:v.required(),max:v.max(),min:v.min()};return T.kt(s)},email(e,a){const s={name:v.name(e,a),type:v.type(),default:T.Qb().email().nullable(),unique:v.unique(),required:v.required(),maxLength:v.maxLength(),minLength:v.minLength()};return T.kt(s)},enumeration(e,a){const s=/^[_A-Za-z][_0-9A-Za-z]*$/,i={name:T.Qb().test(mn(e)).test(vt(a)).matches(s,N.aO.regex).required(N.aO.required),type:v.type(),default:v.default(),unique:v.unique(),required:v.required(),enum:T.M$().of(T.Qb()).min(1,N.aO.min).test({name:"areEnumValuesUnique",message:c("error.validation.enum-duplicate"),test(o){return o?!Io(o.map(yt).filter((r,d,g)=>g.indexOf(r)!==d)).length:!1}}).test({name:"doesNotHaveEmptyValues",message:c("error.validation.enum-empty-string"),test:o=>o?!o.map(yt).some(l=>l===""):!1}).test({name:"doesMatchRegex",message:c("error.validation.enum-regex"),test:o=>o?o.map(yt).every(l=>s.test(l)):!1}),enumName:T.Qb().nullable()};return T.kt(i)},float(e,a){const s={name:v.name(e,a),type:v.type(),required:v.required(),default:T.CQ(),max:T.CQ(),min:T.CQ().test(xt())};return T.kt(s)},integer(e,a){const s={name:v.name(e,a),type:v.type(),default:T.CQ().integer(),unique:v.unique(),required:v.required(),max:v.max(),min:v.min()};return T.kt(s)},json(e,a){const s={name:v.name(e,a),type:v.type(),required:v.required(),unique:v.unique()};return T.kt(s)},media(e,a){const s={name:v.name(e,a),type:v.type(),multiple:T.cT(),required:v.required(),allowedTypes:T.M$().of(T.Qb().oneOf(["images","videos","files","audios"])).min(1).nullable()};return T.kt(s)},password(e,a){const s={name:v.name(e,a),type:v.type(),default:v.default(),unique:v.unique(),required:v.required(),maxLength:v.maxLength(),minLength:v.minLength()};return T.kt(s)},relation(e,a,s,{initialData:i,modifiedData:o}){const l={name:v.name(e,a),target:T.Qb().required(N.aO.required),relation:T.Qb().required(),type:T.Qb().required(),targetAttribute:T.Wk(()=>{const r=(0,x.g)(o.relation,o.targetAttribute);if(r==="oneWay"||r==="manyWay")return T.Qb().nullable();const d=T.Qb().test(vt(a)),m=[...s.map(({name:p})=>p),o.name].filter(p=>p!==i.targetAttribute);return d.matches(un,N.aO.regex).test({name:"forbiddenTargetAttributeName",message:c("error.validation.relation.targetAttribute-taken"),test(p){return p?!m.includes(p):!1}}).required(N.aO.required)})};return T.kt(l)},richtext(e,a){const s={name:v.name(e,a),type:v.type(),default:v.default(),unique:v.unique(),required:v.required(),maxLength:v.maxLength(),minLength:v.minLength()};return T.kt(s)},blocks(e,a){const s={name:v.name(e,a),type:v.type(),default:v.default(),unique:v.unique(),required:v.required(),maxLength:v.maxLength(),minLength:v.minLength()};return T.kt(s)},string(e,a){const s=bt(e,a);return T.kt(s)},text(e,a){const s=bt(e,a);return T.kt(s)},uid(e,a){const s=bt(e,a);return T.kt(s)}},pn=/^[A-Za-z][-_0-9A-Za-z]*$/,Ni=e=>{const a={name:T.Qb().matches(pn,N.aO.regex).test({name:"nameNotAllowed",message:N.aO.unique,test(s){return s?!e.includes(s?.toLowerCase()):!1}}).required(N.aO.required)};return T.kt(a)},Fi={base:{sections:[{sectionTitle:null,items:[{autoFocus:!0,name:"name",type:"text",intlLabel:{id:"global.name",defaultMessage:"Name"},description:{id:c("modalForm.editCategory.base.name.description"),defaultMessage:"No space is allowed for the name of the category"}}]}]}},Oi=(e,a,s,i,o)=>{const l={displayName:T.Qb().test({name:"nameAlreadyUsed",message:N.aO.unique,test(r){if(!r)return!1;const d=(0,x.c)(r,s);return!e.includes(d)&&!i.includes(o)}}).test({name:"nameNotAllowed",message:c("error.contentTypeName.reserved-name"),test(r){return r?!a.includes(r?.trim()?.toLowerCase()):!1}}).required(N.aO.required),category:T.Qb().matches(pn,N.aO.regex).required(N.aO.required),icon:T.Qb()};return T.kt(l)},gn={name:"displayName",type:"text",intlLabel:{id:c("contentType.displayName.label"),defaultMessage:"Display name"}},Ct={advanced:{default(){return{sections:[{items:[{intlLabel:{id:c("contentType.draftAndPublish.label"),defaultMessage:"Draft & publish"},description:{id:c("contentType.draftAndPublish.description"),defaultMessage:"Allows writing a draft version of an entry, before it is published"},name:"draftAndPublish",type:"toggle-draft-publish",validations:{}}]}]}}},base:{create(){return{sections:[{sectionTitle:null,items:[gn,{description:{id:c("contentType.apiId-singular.description"),defaultMessage:"Used to generate the API routes and databases tables/collections"},intlLabel:{id:c("contentType.apiId-singular.label"),defaultMessage:"API ID (Singular)"},name:"singularName",type:"text-singular"},{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{description:{id:c("contentType.apiId-plural.description"),defaultMessage:"Pluralized API ID"},intlLabel:{id:c("contentType.apiId-plural.label"),defaultMessage:"API ID (Plural)"},name:"pluralName",type:"text-plural"}]}]}},edit(){return{sections:[{sectionTitle:null,items:[gn,{disabled:!0,description:{id:c("contentType.apiId-singular.description"),defaultMessage:"Used to generate the API routes and databases tables/collections"},intlLabel:{id:c("contentType.apiId-singular.label"),defaultMessage:"API ID (Singular)"},name:"singularName",type:"text"},{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{disabled:!0,description:{id:c("contentType.apiId-plural.description"),defaultMessage:"Pluralized API ID"},intlLabel:{id:c("contentType.apiId-plural.label"),defaultMessage:"API ID (Plural)"},name:"pluralName",type:"text"},{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"kind",type:"content-type-radio-group",size:12,radios:[{title:{id:c("form.button.collection-type.name"),defaultMessage:"Collection Type"},description:{id:c("form.button.collection-type.description"),defaultMessage:"Best for multiple instances like articles, products, comments, etc."},value:"collectionType"},{title:{id:c("form.button.single-type.name"),defaultMessage:"Single Type"},description:{id:c("form.button.single-type.description"),defaultMessage:"Best for single instance like about us, homepage, etc."},value:"singleType"}]}]}]}}}},Li=({usedContentTypeNames:e=[],reservedModels:a=[],singularNames:s=[],pluralNames:i=[],collectionNames:o=[]})=>{const l={displayName:T.Qb().test({name:"nameAlreadyUsed",message:N.aO.unique,test(r){if(!r)return!1;const d=(0,x.b)(r);return!e.includes(d)}}).test({name:"nameNotAllowed",message:c("error.contentTypeName.reserved-name"),test(r){return r?!a.includes(r?.trim()?.toLowerCase()):!1}}).required(N.aO.required),pluralName:T.Qb().test({name:"pluralNameAlreadyUsed",message:N.aO.unique,test(r){return r?!i.includes(r):!1}}).test({name:"pluralNameAlreadyUsedAsSingular",message:c("error.contentType.pluralName-equals-singularName"),test(r){return r?!s.includes(r):!1}}).test({name:"pluralAndSingularAreUnique",message:c("error.contentType.pluralName-used"),test(r,d){return r?d.parent.singularName!==r:!1}}).test({name:"pluralNameNotAllowed",message:c("error.contentTypeName.reserved-name"),test(r){return r?!a.includes(r?.trim()?.toLowerCase()):!1}}).test({name:"pluralNameNotAlreadyUsedInCollectionName",message:c("error.contentType.pluralName-equals-collectionName"),test(r){return r?!o.includes(r?.trim()?.toLowerCase()):!1}}).required(N.aO.required),singularName:T.Qb().test({name:"singularNameAlreadyUsed",message:N.aO.unique,test(r){return r?!s.includes(r):!1}}).test({name:"singularNameAlreadyUsedAsPlural",message:c("error.contentType.singularName-equals-pluralName"),test(r){return r?!i.includes(r):!1}}).test({name:"pluralAndSingularAreUnique",message:c("error.contentType.singularName-used"),test(r,d){return r?d.parent.pluralName!==r:!1}}).test({name:"singularNameNotAllowed",message:c("error.contentTypeName.reserved-name"),test(r){return r?!a.includes(r?.trim()?.toLowerCase()):!1}}).required(N.aO.required),draftAndPublish:T.cT(),kind:T.Qb().oneOf(["singleType","collectionType"]),reviewWorkflows:T.cT()};return T.kt(l)},Tt={advanced:{default(){return{sections:Qe.advanced()}}},base:{createComponent(){return{sections:[{sectionTitle:null,items:[ht]},...Qe.base("componentToCreate.")]}},default(){return{sections:[{sectionTitle:null,items:[ht]},{sectionTitle:null,items:[{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{name:"components",type:"select-components",intlLabel:{id:c("modalForm.attributes.select-components"),defaultMessage:"Select the components"},isMultiple:!0}]}]}}}},fn=(e,a)=>{e.forEach(s=>{if(!("sectionTitle"in s)){a[0].items?.push(s);return}a.push(s)})},Ei=(e,a)=>`components_${(0,qt.snakeCase)(a)}_${it((0,qt.snakeCase)(e))}`,hn=(e,a)=>e.filter(({name:s})=>s!==a.initialData.name).map(({name:s})=>s),Be={customField:{schema({schemaAttributes:e,attributeType:a,customFieldValidator:s,reservedNames:i,schemaData:o,ctbFormsAPI:l}){const r=hn(e,o);qe[a];let d;return a==="relation"?d=qe[a](r,i.attributes,[],{initialData:{},modifiedData:{}}):d=qe[a](r,i.attributes),l.makeCustomFieldValidator(d,s,r,i.attributes,o)},form:{base({customField:e}){const a=[{sectionTitle:null,items:[Ee]}];return e.options?.base&&fn(e.options.base,a),{sections:a}},advanced({customField:e,data:a,step:s,extensions:i,...o}){const l=[{sectionTitle:null,items:[]}],r=i.getAdvancedForm(["attribute",e.type],{data:a,type:e.type,step:s,...o});if(e.options?.advanced&&fn(e.options.advanced,l),r){const d={sectionTitle:{id:c("modalForm.custom-fields.advanced.settings.extended"),defaultMessage:"Extended settings"},items:r};l.push(d)}return{sections:l}}}},attribute:{schema(e,a,s,i,o,l){const r=e?.schema?.attributes??[],d=hn(r,o);try{const g=qe[a](d,s.attributes,i,o);return l.makeValidator(["attribute",a],g,d,s.attributes,i,o)}catch(g){return console.error("Error yup build schema",g),qe.default(d,s.attributes)}},form:{advanced({data:e,type:a,step:s,extensions:i,...o}){try{const l=dn.advanced[a](e,s).sections,r=i.getAdvancedForm(["attribute",a],{data:e,type:a,step:s,...o});return{sections:l.reduce((g,m)=>(m.sectionTitle===null?g.push(m):g.push({...m,items:[...m.items,...r]}),g),[])}}catch(l){return console.error(l),{sections:[]}}},base({data:e,type:a,step:s,attributes:i}){try{return dn.base[a](e,s,i)}catch{return Si}}}},contentType:{schema(e,a,s,i,o,l){const r=Object.values(l).map(C=>C.schema.singularName),d=Object.values(l).map(C=>C?.schema?.pluralName??""),g=a?e.filter(C=>C!==s):e,m=a?r.filter(C=>{const{schema:S}=l[s];return S.singularName!==C}):r,p=a?d.filter(C=>{const{schema:S}=l[s];return S.pluralName!==C}):d,u=Object.values(l).map(C=>C?.schema?.collectionName??""),I=a?u.filter(C=>{const{schema:S}=l[s],z=S.pluralName,M=S.collectionName;return C!==z||C!==M}):u,A=Li({usedContentTypeNames:g,reservedModels:i.models,singularNames:m,pluralNames:p,collectionNames:I});return o.makeValidator(["contentType"],A,g,i.models,m,p)},form:{base({actionType:e}){return e==="create"?Ct.base.create():Ct.base.edit()},advanced({extensions:e}){const a=Ct.advanced.default().sections.map(i=>i.items).flat(),s=e.getAdvancedForm(["contentType"]);return{sections:[{items:[...a,...s]}]}}}},component:{schema(e,a,s,i=!1,o,l,r=null){const d=i?e.filter(u=>u!==r):e,g=Object.values(o).map(u=>u?.schema?.collectionName),m=Ei(l,a),p=i?g.filter(u=>u!==m):g;return Oi(d,s.models,a,p,m)},form:{advanced(){return{sections:Qe.advanced()}},base(){return{sections:Qe.base()}}}},addComponentToDynamicZone:{form:{advanced(){return Tt.advanced.default()},base({data:e}){return e?.createComponent??!1?Tt.base.createComponent():Tt.base.default()}}},editCategory:{schema(e,a){const s=e.filter(i=>i!==a.name).map(i=>i.toLowerCase());return Ni(s)},form:{advanced:()=>({sections:[]}),base(){return Fi.base}}}},Ii=()=>e=>e[`${x.p}_formModal`]||x.i,$i=()=>(0,_t.M3)(Ii(),e=>e),Di=(e,a)=>{const s=$(e,["contentType","schema","kind"],"");return s==="singleType"||s===a.kind?!0:$(e,["contentType","schema","attributes"],[]).filter(({relation:l,type:r,targetAttribute:d})=>{const g=(0,x.g)(l,d);return r==="relation"&&!["oneWay","manyWay"].includes(g||"")}).length===0},Ri=(e="",a,s)=>{const i=["text","boolean","blocks","json","number","email","date","password","media","enumeration","relation","richtext"],o=e==="contentType",l=s.includes(a),r=!o&&!l;return o?[[...i.slice(0,-1),"uid",...i.slice(-1)],["component","dynamiczone"]]:r?[i,["component"]]:[i]},yn=e=>e.reduce((a,s)=>{const i=s.items.reduce((o,l)=>(l.name&&o.push(l.name),o),[]);return[...a,...i]},[]),Pi=()=>{const{onCloseModal:e,onNavigateToChooseAttributeModal:a,onNavigateToAddCompoToDZModal:s,onNavigateToCreateComponentStep2:i,actionType:o,attributeName:l,attributeType:r,customFieldUid:d,categoryName:g,dynamicZoneTarget:m,forTarget:p,modalType:u,isOpen:I,kind:A,step:C,targetUid:S,showBackLink:z}=Ge(),M=(0,N.QV)().get(d),L=(0,f.useRef)(),U=(0,f.useMemo)($i,[]),B=(0,Ve.OY)(),K=(0,N.eo)(),de=(0,Ve.w1)(G=>U(G),Ve.G),{push:be}=(0,Te.Uz)(),{trackUsage:Z}=(0,N.m4)(),{formatMessage:ye}=(0,H.c)(),{getPlugin:w}=(0,N.U7)(),pe=w(x.p)?.apis.forms,se=pe.components.inputs,{addAttribute:Re,addCustomFieldAttribute:ue,addCreatedComponentToDynamicZone:X,allComponentsCategories:F,changeDynamicZoneComponents:Mt,contentTypes:He,components:ke,createSchema:Ye,deleteCategory:jt,deleteData:lt,editCategory:St,editCustomFieldAttribute:At,submitData:Nt,modifiedData:ge,nestedComponents:Ft,setModifiedData:Ot,sortedContentTypesList:Lt,updateSchema:ct,reservedNames:We}=De(),{componentToCreate:et,formErrors:Pe,initialData:le,isCreatingComponentWhileAddingAField:tt,modifiedData:y}=de,E=p==="contentType"||p==="component"?[p]:[p,S];(0,f.useEffect)(()=>{if(I){const G=Lt.filter(an);u==="editCategory"&&Ot(),o==="edit"&&u==="attribute"&&p==="contentType"&&Z("willEditFieldOfContentType");const Ce=[...E,"schema","attributes"],Le=pt($(ge,Ce,[]),m)||null;if(u==="editCategory"&&o==="edit"&&B({type:x.S,modalType:u,actionType:o,data:{name:g}}),u==="contentType"&&o==="create"&&B({type:x.S,modalType:u,actionType:o,data:{draftAndPublish:!0},pluginOptions:{}}),u==="contentType"&&o==="edit"){const{displayName:Y,draftAndPublish:ce,kind:Se,pluginOptions:he,pluralName:yr,reviewWorkflows:vr,singularName:br}=$(ge,[...E,"schema"],{displayName:null,pluginOptions:{},singularName:null,pluralName:null});B({type:x.S,actionType:o,modalType:u,data:{displayName:Y,draftAndPublish:ce,kind:Se,pluginOptions:he,pluralName:yr,reviewWorkflows:vr??!1,singularName:br}})}if(u==="component"&&o==="edit"){const Y=$(ge,E,{});B({type:x.S,actionType:o,modalType:u,data:{displayName:Y.schema.displayName,category:Y.category,icon:Y.schema.icon}})}if(u==="addComponentToDynamicZone"&&o==="edit"){const Y={...Le,components:[],name:m,createComponent:!1,componentToCreate:{type:"component"}};B({type:x.d,attributeToEdit:Y})}if(r){const ce={...pt($(ge,Ce,[]),l),name:l};r==="component"&&o==="edit"&&(ce.repeatable||Jt(ce,"repeatable",!1)),B(u==="customField"?{type:x.e,customField:M,isEditing:o==="edit",modifiedDataToSetForEditing:ce,forTarget:p}:{type:x.f,attributeType:r,nameToSetForRelation:$(G,["0","title"],"error"),targetUid:$(G,["0","uid"],"error"),isEditing:o==="edit",modifiedDataToSetForEditing:ce,step:C,forTarget:p})}}else B({type:x.R})},[o,l,r,g,m,p,I,u]);const V=u==="contentType",ie=u==="component",fe=u==="attribute",Fe=u==="customField",Oe=r==="component"&&fe,ze=o==="create",Ze=$(y,"createComponent",!1)||tt,Xe=C==="1",Nn=u==="editCategory",Fn=u==="chooseAttribute",Et=(0,x.b)(y.displayName||""),It=$(ge,[...E,"schema","attributes"],null),ar=async()=>{let G;const Ce=Ze&&C==="1"?$(y,"componentToCreate",{}):y;if(V)G=Be.contentType.schema(Object.keys(He),o==="edit",$(ge,[...E,"uid"],null),We,pe,He);else if(ie)G=Be.component.schema(Object.keys(ke),y.category||"",We,o==="edit",ke,y.displayName||"",$(ge,[...E,"uid"],null));else if(Fe)G=Be.customField.schema({schemaAttributes:$(ge,[...E,"schema","attributes"],[]),attributeType:M.type,reservedNames:We,schemaData:{modifiedData:y,initialData:le},ctbFormsAPI:pe,customFieldValidator:M.options?.validator});else if(Oe&&Ze&&Xe)G=Be.component.schema(Object.keys(ke),$(y,"componentToCreate.category",""),We,o==="edit",ke,y.componentToCreate.displayName||"");else if(fe&&!Xe){const Le=r==="relation"?"relation":y.type;let Y=[];if(Le==="relation"){const ce=$(y,["target"],null);Y=$(He,[ce,"schema","attributes"],[]).filter(({name:he})=>o!=="edit"?!0:he!==le.targetAttribute)}G=Be.attribute.schema($(ge,E,{}),Le,We,Y,{modifiedData:y,initialData:le},pe)}else if(Nn)G=Be.editCategory.schema(F,le);else if(Xe&&Ze)G=Be.component.schema(Object.keys(ke),$(y,"componentToCreate.category",""),We,o==="edit",ke,y.componentToCreate.displayName||"");else return;await G.validate(Ce,{abortEarly:!1})},On=(0,f.useCallback)(({target:{name:G,value:Ce,type:Le,...Y}})=>{const ce=["enumName","max","min","maxLength","minLength","regex","default"];let Se;ce.includes(G)&&Ce===""?Se=null:Se=Ce;const he=Object.assign({},Pe);G==="max"&&delete he.min,G==="maxLength"&&delete he.minLength,delete he[G],B({type:x.h,errors:he}),B({type:x.j,keys:G.split("."),value:Se,...Y})},[B,Pe]),je=async(G,Ce=ze)=>{G.preventDefault();try{await ar(),ir(Ce);const Le=p==="components"?S:Et;if(V)if(ze)Ye({...y,kind:A},u,Et),be({pathname:`/plugins/${x.p}/content-types/${Et}`}),a({forTarget:p,targetUid:Le});else{Di(ge,y)?(e(),Nt(y)):K({type:"warning",message:{id:"notification.contentType.relations.conflict"}});return}else if(u==="component")if(ze){const Y=(0,x.c)(y.displayName,y.category),{category:ce,...Se}=y;Ye(Se,"component",Y,ce),be({pathname:`/plugins/${x.p}/component-categories/${ce}/${Y}`}),a({forTarget:p,targetUid:Y})}else{ct(y,u,S),e();return}else if(Nn){if(Kt(le.name)===Kt(y.name)){e();return}St(le.name,y);return}else if(Fe){const Y={attributeToSet:{...y,customField:d},forTarget:p,targetUid:S,initialAttribute:le};o==="edit"?At(Y):ue(Y),Ce?a({forTarget:p,targetUid:Le}):e();return}else if(fe&&!Ze){if(r==="dynamiczone"){Re(y,p,S,o==="edit",le),ze?(B({type:x.k}),L.current!==void 0&&L.current._handlers.setSelectedTabIndex(0),s({dynamicZoneTarget:y.name})):e();return}if(!Oe){Re(y,p,S,o==="edit",le),Ce?a({forTarget:p,targetUid:Le}):e();return}if(Xe){i(),B({type:x.l,forTarget:p});return}Re(y,p,S,o==="edit",le,!0),Ce?a({forTarget:p,targetUid:S}):e()}else if(fe&&Ze){if(Xe){Z("willCreateComponentFromAttributesModal"),B({type:x.m,forTarget:p}),i();return}const{category:Y,type:ce,...Se}=et,he=(0,x.c)(et.displayName,Y);Ye(Se,ce,he,Y,Ze),Re(y,p,S,!1),B({type:x.R}),Ce?a({forTarget:"components",targetUid:he}):e();return}else{if(Xe)if(Ze){const{category:Y,type:ce,...Se}=y.componentToCreate,he=(0,x.c)(y.componentToCreate.displayName,Y);Ye(Se,ce,he,Y,Ze),X(m,[he]),a({forTarget:"components",targetUid:he})}else Mt(m,y.components),e();else console.error("This case is not handled");return}B({type:x.R})}catch(Le){const Y=(0,N.CK)(Le);B({type:x.h,errors:Y})}},sr=()=>{window.confirm(ye({id:"window.confirm.close-modal.file",defaultMessage:"Are you sure? Your changes will be lost."}))&&(e(),B({type:x.R}))},Ln=()=>{ut(y,le)?(e(),B({type:x.R})):sr()},or=G=>{if(G==="advanced"){if(V){Z("didSelectContentTypeSettings");return}p==="contentType"&&Z("didSelectContentTypeFieldSettings")}},ir=G=>{u==="attribute"&&p==="contentType"&&r!=="dynamiczone"&&G&&Z("willAddMoreFieldToContentType")},rr=()=>!!(u==="editCategory"||u==="component"||Lo(y,"createComponent")),lr=Ri(p,S,Ft);if(!I||!u)return null;const En=$(Be,[u,"form"],{advanced:()=>({sections:[]}),base:()=>({sections:[]})}),cr=p==="components"||p==="component",In={customInputs:{"allowed-types-select":ko,"boolean-radio-group":_o,"checkbox-with-number-field":ei,"icon-picker":ci,"content-type-radio-group":ti,"radio-group":gt,relation:vi,"select-category":bi,"select-component":xi,"select-components":Ci,"select-default-boolean":wo,"select-number":ln,"select-date":Ti,"toggle-draft-publish":ni,"text-plural":di,"text-singular":Mi,"textarea-enum":ji,...se},componentToCreate:et,dynamicZoneTarget:m,formErrors:Pe,isAddingAComponentToAnotherComponent:cr,isCreatingComponentWhileAddingAField:tt,mainBoxHeader:$(ge,[...E,"schema","displayName"],""),modifiedData:y,naturePickerType:p,isCreating:ze,targetUid:S,forTarget:p},$n=En.advanced({data:y,type:r,step:C,actionType:o,attributes:It,extensions:pe,forTarget:p,contentTypeSchema:ge.contentType||{},customField:M}).sections,Dn=En.base({data:y,type:r,step:C,actionType:o,attributes:It,extensions:pe,forTarget:p,contentTypeSchema:ge.contentType||{},customField:M}).sections,dr=yn(Dn),ur=yn($n),mr=Object.keys(Pe).some(G=>dr.includes(G)),pr=Object.keys(Pe).some(G=>ur.includes(G)),gr=$(He,[S,"schema","kind"]),fr=()=>o==="edit"&&It.every(({name:G})=>G!==y?.name),hr=()=>{fr()&&Z("didEditFieldNameOnContentType")};return(0,t.jsxs)(Vn.E,{onClose:Ln,labelledBy:"title",children:[(0,t.jsx)(si,{actionType:o,attributeName:l,categoryName:g,contentTypeKind:A,dynamicZoneTarget:m,modalType:u,forTarget:p,targetUid:S,attributeType:r,customFieldUid:d,showBackLink:z}),Fn&&(0,t.jsx)(Ko,{attributes:lr,forTarget:p,kind:gr||"collectionType"}),!Fn&&(0,t.jsxs)("form",{onSubmit:je,children:[(0,t.jsx)(Ie.a,{children:(0,t.jsxs)(re.M,{label:"todo",id:"tabs",variant:"simple",ref:L,onTabChange:G=>{G===1&&or("advanced")},children:[(0,t.jsxs)(b.C,{justifyContent:"space-between",children:[(0,t.jsx)(ii,{actionType:o,forTarget:p,kind:A,step:C,modalType:u,attributeType:r,attributeName:l,customField:M}),(0,t.jsxs)(oe.k,{children:[(0,t.jsx)(oe.s,{hasError:mr,children:ye({id:c("popUpForm.navContainer.base"),defaultMessage:"Basic settings"})}),(0,t.jsx)(oe.s,{hasError:pr,disabled:rr(),children:ye({id:c("popUpForm.navContainer.advanced"),defaultMessage:"Advanced settings"})})]})]}),(0,t.jsx)(ee.c,{}),(0,t.jsx)(h.k,{paddingTop:6,children:(0,t.jsxs)(ae.o,{children:[(0,t.jsx)(ae.G,{children:(0,t.jsx)(b.C,{direction:"column",alignItems:"stretch",gap:6,children:(0,t.jsx)(cn,{form:Dn,formErrors:Pe,genericInputProps:In,modifiedData:y,onChange:On})})}),(0,t.jsx)(ae.G,{children:(0,t.jsx)(b.C,{direction:"column",alignItems:"stretch",gap:6,children:(0,t.jsx)(cn,{form:$n,formErrors:Pe,genericInputProps:In,modifiedData:y,onChange:On})})})]})})]})}),(0,t.jsx)(Gn._,{endActions:(0,t.jsx)(ai,{deleteCategory:jt,deleteContentType:lt,deleteComponent:lt,categoryName:le.name,isAttributeModal:u==="attribute",isCustomFieldModal:u==="customField",isComponentToDzModal:u==="addComponentToDynamicZone",isComponentAttribute:r==="component",isComponentModal:u==="component",isContentTypeModal:u==="contentType",isCreatingComponent:o==="create",isCreatingDz:o==="create",isCreatingComponentAttribute:y.createComponent||!1,isCreatingComponentInDz:y.createComponent||!1,isCreatingComponentWhileAddingAField:tt,isCreatingContentType:o==="create",isEditingAttribute:o==="edit",isDzAttribute:r==="dynamiczone",isEditingCategory:u==="editCategory",isInFirstComponentStep:C==="1",onSubmitAddComponentAttribute:je,onSubmitAddComponentToDz:je,onSubmitCreateComponent:je,onSubmitCreateContentType:je,onSubmitCreateDz:je,onSubmitEditAttribute:je,onSubmitEditCategory:je,onSubmitEditComponent:je,onSubmitEditContentType:je,onSubmitEditCustomFieldAttribute:je,onSubmitEditDz:je,onClickFinish:hr}),startActions:(0,t.jsx)(_.Z,{variant:"tertiary",onClick:Ln,children:ye({id:"app.components.Button.cancel",defaultMessage:"Cancel"})})})]})]})},Ui=()=>e=>e[`${x.p}_dataManagerProvider`]||x.o,Bi=()=>(0,_t.M3)(Ui(),e=>e),ki=(e,a)=>{const s=Object.keys(e).filter(i=>{const o=$(e,i,{}),l=$(a,i,{}),r=$(o,["isTemporary"],!1),d=!ut(o,l);return r||d});return(0,x.q)(s)},Wi=(e,a)=>{const s=bn($(e,"schema.attributes",[]),a),i=$(e,"isTemporary",!1)?{tmpUID:e.uid}:{uid:e.uid};return Object.assign({},i,{category:e.category},en(e.schema,"attributes"),{attributes:s})},vn=(e,a=!1)=>{const s=$(e,"uid",null),i=bn($(e,"schema.attributes",[]),s),o=a?{category:$(e,"category","")}:{},l=Object.assign(o,en(e.schema,"attributes"),{attributes:i});return delete l.uid,delete l.isTemporary,delete l.visible,delete l.restrictRelationsTo,l},bn=(e,a)=>e.reduce((s,{name:i,...o})=>{const l=o,r=l.target===a,d=l.type==="relation",g=$(l,"targetAttribute",null);if(!r)if(d){const m=Object.assign({},l,{targetAttribute:xn(g)});s[i]=rt(m)}else s[i]=rt(l);if(r){const m=l.target,p=Object.assign({},l,{target:m,targetAttribute:xn(g)});s[i]=rt(p)}if(l.customField){const m={...l,type:"customField"};s[i]=rt(m)}return s},{}),xn=e=>e==="-"?null:e,rt=e=>Object.keys(e).reduce((a,s)=>(e[s]!==null&&s!=="plugin"&&(a[s]=e[s]),a),{}),zi=(e,a,s)=>ki(e,a).map(l=>{const r=$(e,l,{});return Wi(r,s)}),Zi=e=>Ro(Object.keys(e).map(a=>({visible:e[a].schema.visible,name:a,title:e[a].schema.displayName,plugin:e[a].plugin||null,uid:a,to:`/plugins/${x.p}/content-types/${a}`,kind:e[a].schema.kind,restrictRelationsTo:e[a].schema.restrictRelationsTo})).filter(a=>a!==null),a=>Do(a.title)),Cn=e=>e.reduce((a,s)=>(a[s.uid]=s,a),{}),Vi=(e,a,s,i)=>{const o=a.reduce((d,g)=>{const m=$(s,g,{});return d[g]=m,d},{});return{[i?"contentType":"component"]:e,components:o}},Tn=e=>Object.keys(e).reduce((a,s)=>{const i=e[s].schema;return a[s]={...e[s],schema:{...i,attributes:Gi(i.attributes)}},a},{}),Gi=e=>Object.keys(e).reduce((a,s)=>(a.push({...e[s],name:s}),a),[]),Qi=e=>{const a=Object.keys(e).reduce((s,i)=>{const o=$(e,[i]),l=o.uid;return Hi(o)&&s.push(l),s},[]);return(0,x.q)(a)},Hi=e=>$(e,["schema","attributes"],[]).some(s=>{const{type:i}=s;return i==="component"}),Mn=e=>{const a=Object.keys(e).reduce((s,i)=>{const o=e?.[i]?.schema?.attributes??[],l=Yi(o);return[...s,...l]},[]);return(0,x.q)(a)},Yi=e=>e.reduce((a,s)=>{const{type:i,component:o}=s;return i==="component"&&a.push(o),a},[]),Xi=(e,a)=>{const s=Object.keys(e).map(i=>$(e,[i,...a],""));return(0,x.q)(s)},jn="did-not-kill-server",Ji="server is down";function _e(e,a){return new Promise(s=>{fetch(`${window.strapi.backendURL}/_health`,{method:"HEAD",mode:"no-cors",headers:{"Content-Type":"application/json","Keep-Alive":"false"}}).then(i=>{if(i.status>=400)throw new Error(Ji);if(!a)throw new Error(jn);s(e)}).catch(i=>{setTimeout(()=>_e(e,i.message!==jn).then(s),100)})})}const Ki=e=>Object.values(e.attributes).filter(s=>s.type==="dynamiczone").every(s=>Array.isArray(s.components)&&s.components.length>0),wi=({children:e})=>{const a=(0,Ve.OY)(),{components:s,contentTypes:i,isLoading:o,isLoadingForDataToBeSet:l,initialData:r,modifiedData:d,reservedNames:g}=(0,Ve.w1)(Bi()),m=(0,N.eo)(),{lockAppWithAutoreload:p,unlockAppWithAutoreload:u}=(0,N.iK)(),{setCurrentStep:I}=(0,N.sg)(),{getPlugin:A}=(0,N.U7)(),C=A(x.p),{autoReload:S}=(0,N.s7)(),{formatMessage:z}=(0,H.c)(),{trackUsage:M}=(0,N.m4)(),{refetchPermissions:L}=(0,N.c_)(),{pathname:U}=(0,Te.IT)(),{onCloseModal:B}=Ge(),K=(0,Te.SU)(`/plugins/${x.p}/content-types/:uid`),de=(0,Te.SU)(`/plugins/${x.p}/component-categories/:categoryUid/:componentUid`),be=(0,N.Qn)(),{put:Z,post:ye,del:w}=be,xe=(0,f.useRef)();xe.current=z;const pe=S,se=K!==null,Re=se?"contentType":"component",ue=se?$(K,"params.uid",null):$(de,"params.componentUid",null),X=(0,f.useRef)(),F=se?"content-types":"components";X.current=async()=>{try{const[{data:{data:y}},{data:{data:E}},{data:V}]=await Promise.all(["components","content-types","reserved-names"].map(ze=>be.get(`/${x.p}/${ze}`))),ie=Cn(y),fe=Tn(ie),Fe=Cn(E),Oe=Tn(Fe);a({type:x.G,components:fe,contentTypes:Oe,reservedNames:V})}catch(y){console.error({err:y}),m({type:"warning",message:{id:"notification.error"}})}},(0,f.useEffect)(()=>(X.current(),()=>{a({type:x.r})}),[]),(0,f.useEffect)(()=>{!o&&ue&&ct()},[o,U,ue]),(0,f.useEffect)(()=>{S||m({type:"info",message:{id:c("notification.info.autoreaload-disable")}})},[S,m]);const Mt=(y,E,V,ie=!1,fe,Fe=!1)=>{const Oe=ie?x.w:x.x;a({type:Oe,attributeToSet:y,forTarget:E,targetUid:V,initialAttribute:fe,shouldAddComponentToData:Fe})},He=({attributeToSet:y,forTarget:E,targetUid:V,initialAttribute:ie})=>{a({type:x.A,attributeToSet:y,forTarget:E,targetUid:V,initialAttribute:ie})},ke=({attributeToSet:y,forTarget:E,targetUid:V,initialAttribute:ie})=>{a({type:x.E,attributeToSet:y,forTarget:E,targetUid:V,initialAttribute:ie})},Ye=(y,E)=>{a({type:x.u,dynamicZoneTarget:y,componentsToAdd:E})},jt=(y,E,V,ie,fe=!1)=>{const Fe=E==="contentType"?x.y:x.z;a({type:Fe,data:y,componentCategory:ie,schemaType:E,uid:V,shouldAddComponentToData:fe})},lt=(y,E)=>{a({type:x.C,dynamicZoneTarget:y,newComponents:E})},St=(y,E,V="")=>{const ie=y==="components"?x.B:x.F;y==="contentType"&&M("willDeleteFieldOfContentType"),a({type:ie,mainDataKey:y,attributeToRemoveName:E,componentUid:V})},At=async y=>{try{const E=`/${x.p}/component-categories/${y}`,V=window.confirm(z({id:c("popUpWarning.bodyMessage.category.delete")}));B(),V&&(p?.(),await w(E),await _e(!0),u?.(),await le())}catch(E){console.error({err:E}),m({type:"warning",message:{id:"notification.error"}})}finally{u?.()}},Nt=async()=>{try{const y=`/${x.p}/${F}/${ue}`,E=$(d,[Re,"isTemporary"],!1),V=window.confirm(z({id:c(`popUpWarning.bodyMessage.${se?"contentType":"component"}.delete`)}));if(B(),V){if(E){a({type:x.D});return}p?.(),await w(y),await _e(!0),await u?.(),await le()}}catch(y){console.error({err:y}),m({type:"warning",message:{id:"notification.error"}})}finally{u?.()}},ge=async(y,E)=>{try{const V=`/${x.p}/component-categories/${y}`;B(),p?.(),await Z(V,E),await _e(!0),await u?.(),await le()}catch(V){console.error({err:V}),m({type:"warning",message:{id:"notification.error"}})}finally{u?.()}},Ft=()=>{const y=Object.assign({},s,d.components);if(!se){const V=$(d,"component",{});Jt(y,$(V,["uid"],""),V)}const E=Qi(y);return(0,x.q)(E)},Ot=()=>{const y=Mn(s),E=Mn(d.components||{});return(0,x.q)([...E,...y])},Lt=(y,E)=>{a({type:x.v,dzName:y,componentToRemoveIndex:E})},ct=()=>{const E=$(se?i:s,ue??"",{schema:{attributes:[]}}),V=(0,x.s)(E.schema.attributes,s),ie=Vi(E,V,s,se),fe=$(E,"isTemporary",!1)&&Oo($(E,"schema.attributes",[]))===0;a({type:x.t,schemaToSet:ie,hasJustCreatedSchema:fe})},We=(0,f.useMemo)(()=>{const y=se?i:s;return ue==="create-content-type"?!1:!Object.keys(y).includes(ue||"")&&!o},[s,i,ue,se,o]),et=(0,f.useMemo)(()=>{const y=Object.keys(i).filter(E=>$(i,[E,"schema","visible"],!0)).sort();return $(y,"0","create-content-type")},[i]);if(We)return(0,t.jsx)(Te.YJ,{to:`/plugins/${x.p}/content-types/${et}`});const Pe=async y=>{try{const E=$(d,[Re,"isTemporary"],!1),V={components:zi(d.components,s,ue)};if(se){const Oe=(C?.apis?.forms).mutateContentTypeSchema({...vn(d.contentType),...y},r.contentType);if(!Ki(Oe)){m({type:"warning",message:{id:c("notification.error.dynamiczone-min.validation"),defaultMessage:"At least one component is required in a dynamic zone to be able to save a content type"}});return}V.contentType=Oe,M("willSaveContentType")}else V.component=vn(d.component,!0),M("willSaveComponent");p?.();const ie=`/${x.p}/${F}`,fe=E?ie:`${ie}/${ue}`;if(E?await ye(fe,V):await Z(fe,V),await _e(!0),await u?.(),E&&(r.contentType?.schema.kind==="collectionType"||r.contentType?.schema.kind==="singleType")&&I("contentTypeBuilder.success"),se){M("didSaveContentType");const Fe=$(V,["contentType","schema","name"],""),Oe=$(r,["contentType","schema","name"],"");!E&&Fe!==Oe&&M("didEditNameOfContentType")}else M("didSaveComponent");await le()}catch(E){se||M("didNotSaveComponent"),console.error({err:E.response}),m({type:"warning",message:{id:"notification.error"}})}finally{u?.()}},le=async()=>{await L()},tt=(y,E,V)=>{a({type:x.U,data:y,schemaType:E,uid:V})};return(0,t.jsx)(tn.Provider,{value:{addAttribute:Mt,addCustomFieldAttribute:He,addCreatedComponentToDynamicZone:Ye,allComponentsCategories:Xi(s,["category"]),changeDynamicZoneComponents:lt,components:s,componentsGroupedByCategory:Fo(s,"category"),componentsThatHaveOtherComponentInTheirAttributes:Ft(),contentTypes:i,createSchema:jt,deleteCategory:At,deleteData:Nt,editCategory:ge,editCustomFieldAttribute:ke,isInDevelopmentMode:pe,initialData:r,isInContentTypeView:se,modifiedData:d,nestedComponents:Ot(),removeAttribute:St,removeComponentFromDynamicZone:Lt,reservedNames:g,setModifiedData:ct,sortedContentTypesList:Zi(i),submitData:Pe,updateSchema:tt},children:l?(0,t.jsx)(N.Wm,{}):(0,t.jsxs)(t.Fragment,{children:[e,pe&&(0,t.jsx)(Pi,{})]})})},qi=(0,f.memo)(wi),Sn={actionType:null,attributeName:null,attributeType:null,categoryName:null,dynamicZoneTarget:null,forTarget:null,modalType:null,isOpen:!1,showBackLink:!1,kind:null,step:null,targetUid:null,customFieldUid:null},_i=({children:e})=>{const[a,s]=f.useState(Sn),{trackUsage:i}=(0,N.m4)(),o=({attributeType:M,customFieldUid:L})=>{s(U=>({...U,actionType:"create",modalType:"customField",attributeType:M,customFieldUid:L}))},l=({attributeType:M,step:L})=>{a.forTarget==="contentType"&&i("didSelectContentTypeFieldType",{type:M}),s(U=>({...U,actionType:"create",modalType:"attribute",step:L,attributeType:M,showBackLink:!0}))},r=({dynamicZoneTarget:M,targetUid:L})=>{s(U=>({...U,dynamicZoneTarget:M,targetUid:L,modalType:"addComponentToDynamicZone",forTarget:"contentType",step:"1",actionType:"edit",isOpen:!0}))},d=({forTarget:M,targetUid:L})=>{s(U=>({...U,actionType:"create",forTarget:M,targetUid:L,modalType:"chooseAttribute",isOpen:!0,showBackLink:!1}))},g=M=>{s(L=>({...L,...M,isOpen:!0}))},m=M=>{s(L=>({...L,categoryName:M,actionType:"edit",modalType:"editCategory",isOpen:!0}))},p=({forTarget:M,targetUid:L,attributeName:U,attributeType:B,customFieldUid:K})=>{s(de=>({...de,modalType:"customField",customFieldUid:K,actionType:"edit",forTarget:M,targetUid:L,attributeName:U,attributeType:B,isOpen:!0}))},u=({forTarget:M,targetUid:L,attributeName:U,attributeType:B,step:K})=>{s(de=>({...de,modalType:"attribute",actionType:"edit",forTarget:M,targetUid:L,attributeName:U,attributeType:B,step:K,isOpen:!0}))},I=({modalType:M,forTarget:L,targetUid:U,kind:B})=>{s(K=>({...K,modalType:M,actionType:"edit",forTarget:L,targetUid:U,kind:B,isOpen:!0}))},A=()=>{s(Sn)},C=({forTarget:M,targetUid:L})=>{s(U=>({...U,forTarget:M,targetUid:L,modalType:"chooseAttribute"}))},S=()=>{s(M=>({...M,attributeType:"component",modalType:"attribute",step:"2"}))},z=({dynamicZoneTarget:M})=>{s(L=>({...L,dynamicZoneTarget:M,modalType:"addComponentToDynamicZone",actionType:"create",step:"1",attributeType:null,attributeName:null}))};return(0,t.jsx)(nn.Provider,{value:{...a,onClickSelectField:l,onClickSelectCustomField:o,onCloseModal:A,onNavigateToChooseAttributeModal:C,onNavigateToAddCompoToDZModal:z,onOpenModalAddComponentsToDZ:r,onNavigateToCreateComponentStep2:S,onOpenModalAddField:d,onOpenModalCreateSchema:g,onOpenModalEditCategory:m,onOpenModalEditField:u,onOpenModalEditCustomField:p,onOpenModalEditSchema:I,setFormModalNavigationState:s},children:e})},er=(0,f.lazy)(()=>n.e(7272).then(n.bind(n,77272))),tr=()=>{const{url:e}=(0,Te.SU)();return(0,t.jsx)(f.Suspense,{fallback:(0,t.jsx)(N.Wm,{}),children:(0,t.jsx)(Te.Wk,{children:(0,t.jsx)(Te.kX,{path:`${e}/:componentUid`,children:(0,t.jsx)(er,{})})})})},An=(0,f.lazy)(()=>n.e(7272).then(n.bind(n,77272))),nr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{formatMessage:e}=(0,H.c)(),a=e({id:`${x.p}.plugin.name`,defaultMessage:"Content Types Builder"}),{startSection:s}=(0,N.sg)(),i=(0,f.useRef)(s);return(0,f.useEffect)(()=>{i.current&&i.current("contentTypeBuilder")},[]),(0,t.jsxs)(N.rF,{permissions:x.P.main,children:[(0,t.jsx)(Hn.S,{title:a}),(0,t.jsx)(_i,{children:(0,t.jsx)(qi,{children:(0,t.jsx)(Qn._,{sideNav:(0,t.jsx)(Uo,{}),children:(0,t.jsx)(f.Suspense,{fallback:(0,t.jsx)(N.Wm,{}),children:(0,t.jsxs)(Te.Wk,{children:[(0,t.jsx)(Te.kX,{path:`/plugins/${x.p}/content-types/create-content-type`,component:An}),(0,t.jsx)(Te.kX,{path:`/plugins/${x.p}/content-types/:uid`,component:An}),(0,t.jsx)(Te.kX,{path:`/plugins/${x.p}/component-categories/:categoryUid`,component:tr})]})})})})})]})}},Symbol.toStringTag,{value:"Module"}))}}]);
